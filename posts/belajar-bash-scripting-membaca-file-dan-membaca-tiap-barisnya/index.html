<!doctype html><html lang=id dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Belajar Bash Scripting: Membaca File dan Membaca Tiap Barisnya | Linux & Cloud | blog.annahri.com</title>
<meta name=keywords content="bash,scripting"><meta name=description content="Mukadimah Dalam menulis script, terkadang kita ingin menjalankan sekumpulan perintah berdasarkan data yang ada pada suatu file (baik raw file, csv, dsb). Kemudian juga terkadang, kita ingin menuliskan suatu script yang menghasilkan suatu file berupa log, atau data terstruktur seperti csv, dan sebagainya.
Maka, pada seri tulisan &ldquo;Belajar Bash Scripting&rdquo; kali ini, saya akan membahas mengenai bagaimana cara membaca dan menghasilkan suatu file pada bash.
Membaca File Secara umum, suatu file teks bisa dibaca menggunakan perintah cat:"><meta name=author content="Muhammad Ahfas An Nahri"><link rel=canonical href=https://blog.annahri.com/posts/belajar-bash-scripting-membaca-file-dan-membaca-tiap-barisnya/><link crossorigin=anonymous href=/assets/css/stylesheet.132d99d4d98a75b27051b5015ea59ebe1cfa5b80dc64565f1d525d82a1abd2a0.css integrity="sha256-Ey2Z1NmKdbJwUbUBXqWevhz6W4DcZFZfHVJdgqGr0qA=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.annahri.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.annahri.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.annahri.com/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.annahri.com/apple-touch-icon.png><link rel=mask-icon href=https://blog.annahri.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><link rel=stylesheet href=https://blog.annahri.com/css/custom_papermod.css><script async src="https://www.googletagmanager.com/gtag/js?id=G-CY69EEKCTJ"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-CY69EEKCTJ",{anonymize_ip:!1})}</script><meta property="og:title" content="Belajar Bash Scripting: Membaca File dan Membaca Tiap Barisnya"><meta property="og:description" content="Mukadimah Dalam menulis script, terkadang kita ingin menjalankan sekumpulan perintah berdasarkan data yang ada pada suatu file (baik raw file, csv, dsb). Kemudian juga terkadang, kita ingin menuliskan suatu script yang menghasilkan suatu file berupa log, atau data terstruktur seperti csv, dan sebagainya.
Maka, pada seri tulisan &ldquo;Belajar Bash Scripting&rdquo; kali ini, saya akan membahas mengenai bagaimana cara membaca dan menghasilkan suatu file pada bash.
Membaca File Secara umum, suatu file teks bisa dibaca menggunakan perintah cat:"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.annahri.com/posts/belajar-bash-scripting-membaca-file-dan-membaca-tiap-barisnya/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-07-28T19:40:22+07:00"><meta property="article:modified_time" content="2023-07-28T19:40:22+07:00"><meta property="og:site_name" content="Linux & Cloud | blog.annahri.com"><meta name=twitter:card content="summary"><meta name=twitter:title content="Belajar Bash Scripting: Membaca File dan Membaca Tiap Barisnya"><meta name=twitter:description content="Mukadimah Dalam menulis script, terkadang kita ingin menjalankan sekumpulan perintah berdasarkan data yang ada pada suatu file (baik raw file, csv, dsb). Kemudian juga terkadang, kita ingin menuliskan suatu script yang menghasilkan suatu file berupa log, atau data terstruktur seperti csv, dan sebagainya.
Maka, pada seri tulisan &ldquo;Belajar Bash Scripting&rdquo; kali ini, saya akan membahas mengenai bagaimana cara membaca dan menghasilkan suatu file pada bash.
Membaca File Secara umum, suatu file teks bisa dibaca menggunakan perintah cat:"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.annahri.com/posts/"},{"@type":"ListItem","position":2,"name":"Belajar Bash Scripting: Membaca File dan Membaca Tiap Barisnya","item":"https://blog.annahri.com/posts/belajar-bash-scripting-membaca-file-dan-membaca-tiap-barisnya/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Belajar Bash Scripting: Membaca File dan Membaca Tiap Barisnya","name":"Belajar Bash Scripting: Membaca File dan Membaca Tiap Barisnya","description":"Mukadimah Dalam menulis script, terkadang kita ingin menjalankan sekumpulan perintah berdasarkan data yang ada pada suatu file (baik raw file, csv, dsb). Kemudian juga terkadang, kita ingin menuliskan suatu script yang menghasilkan suatu file berupa log, atau data terstruktur seperti csv, dan sebagainya.\nMaka, pada seri tulisan \u0026ldquo;Belajar Bash Scripting\u0026rdquo; kali ini, saya akan membahas mengenai bagaimana cara membaca dan menghasilkan suatu file pada bash.\nMembaca File Secara umum, suatu file teks bisa dibaca menggunakan perintah cat:","keywords":["bash","scripting"],"articleBody":" Mukadimah Dalam menulis script, terkadang kita ingin menjalankan sekumpulan perintah berdasarkan data yang ada pada suatu file (baik raw file, csv, dsb). Kemudian juga terkadang, kita ingin menuliskan suatu script yang menghasilkan suatu file berupa log, atau data terstruktur seperti csv, dan sebagainya.\nMaka, pada seri tulisan “Belajar Bash Scripting” kali ini, saya akan membahas mengenai bagaimana cara membaca dan menghasilkan suatu file pada bash.\nMembaca File Secara umum, suatu file teks bisa dibaca menggunakan perintah cat:\n$ cat file.txt pertama kedua ketiga keempat kelima 💡 Sebenarnya, perintah cat ini berfungsi untuk menggabungkan file menjadi 1 dan menampilkannya pada stdout.\nKarena fungsinya demikian, ketika argumen yang diberikan hanyalah 1 saja, maka tentu yang muncul hanya isi dari file tersebut. Dengan demikian, hal tersebut bisa dimanfaatkan untuk keperluan “membaca isi file”.\nBiasanya cat digunakan untuk membaca/membuka file yang kemudian akan diproses menggunakan perintah lain agar mudah dibaca. Beberapa perintah mendukung input langsung melalui stdin sehingga cat tidak diperlukan.\nMenyimpan isi file kedalam variabel Menggunakan process substitution:\nvar1=\"$(cat file.txt)\" var2=\"$(cat file.txt | ...)\" Menggunakan printf:\nprintf -v var1 '%s\\n' \"$(cat file.txt)\" Membaca file baris-per-baris Ada beberapa cara untuk melakukan hal ini, tergantung dengan tujuannya. Namun, seluruhnya menggunakan loop, baik for atau while\nJika hanya melakukan suatu proses tanpa adanya penyematan variabel, maka bisa menggunakan pipe. Hanya bisa dengan while loop saja. Jika melakukan suatu proses dengan adanya penyematan variabel didalamnya, maka pipe tidak bisa digunakan. Bisa menggunakan for atau while loop. 💡 Semua proses yang berjalan didalam pipeline, itu berjalan pada subshell. Pada subshell, semua penyematan variabel hanya berdampak pada lingkup subshell itu sendiri dan tidak terekspos ke shell diatasnya.\nLoop menggunakan pipe Menggunakan kombinasi while read dengan inputan dari pipe:\ncat file.txt | while read -r line; do echo \"Baris: $line\" ... ... done Pada contoh diatas, tiap baris yang ada pada file, bisa diakses menggunakan variabel $line (bisa diganti sesuai keinginan, while read -r baris misalnya) dan berurutan. Dalam bentuk seperti ini, semua penyematan variabel tidak akan tersimpan.\nLoop tanpa pipe Masih menggunakan kombinasi while read dengan inputan dari \u003c:\nwhile read -r line; do echo \"Baris: $line\" ... ... done \u003c file.txt Metode yang ini digunakan apabile jika operasi yang ingin dilakukan terdapat penyematan variabel berdasarkan data yang ada pada baris yang dibaca.\nLoop for juga bisa digunakan, namun secara asal (default), akan bermasalah jika baris yang ada di dalam file itu lebih dari 1 kata (dipisahkan dengan spasi):\nfor line in $(cat file.txt); do echo \"Baris: $line\" ... ... done Untuk mengatasi limitasi diatas, perlu mengatur variabel internal IFS (Internal Field Separator) untuk memberitahu for, pada momen apa suatu baris itu berganti.\nOIFS=$IFS # Menyimpan value awal IFS IFS=$'\\n' # Mengganti isi IFS menjadi newline (ganti baris) for line in $(cat file.txt); do echo \"Baris: $line\" ... ... done IFS=$OIFS # Mengembalikan value IFS menjadi seperti awal 💡 Secara asal, variabel IFS berisikan 1 spasi. Sehingga for (dan perintah lain) akan memaknai ganti “kolom” ketika bertemu spasi.\nContoh tanpa mengganti IFS:\n$ cat file.txt baris satu baris dua baris tiga baris empat $ for line in $(cat file.txt); do \u003e echo \"$((++i)): $line\" \u003e done 1: baris 2: satu 3: baris 4: dua 5: baris 6: tiga 7: baris 8: empat Hasilnya adalah setiap barisnya akan terpecah (split) pada spasi, sehingga menjadi tidak sesuai harapan.\nContoh dengan mengganti IFS:\n$ cat file.txt baris satu baris dua baris tiga baris empat $ OIFS=$IFS $ IFS=$'\\n' $ for line in $(cat file.txt); do \u003e echo \"$((++i)): $line\" \u003e done 1: baris satu 2: baris dua 3: baris tiga 4: baris empat Membaca file csv File csv adalah suatu file yang tiap barisnya berisikan kolom-kolom yang dipisahkan (delimiter atau separator) dengan tanda koma , (atau separator yang lain, seperti spasi, tab, dsb).\nContoh file csv:\n$ cat file.csv Fulan,Surabya,24,Swasta Joko,Pacitan,30,PNS Ahmad,Tangerang,29,Swasta Abbas,Malang,40,Wiraswasta Misal, kita ingin membuat script untuk meng-generate alamat email berdasarkan data diatas. Maka, kita bisa menggunakan kombinasi while read loop dan IFS untuk memisahkan masing-masing kolomnya.\nwhile IFS=, read -r nama kota umur pekerjaan; do echo \"Email: ${nama,,}.${kota,,}@mail.co.id\" done \u003c file.csv 💡 Sintaks ${variabel,,} merupakan salah satu dari fungsi Parameter Expansion dari Bash untuk mengubah isi variabel menjadi huruf kecil seluruhnya. Untuk menjadikan seluruhnya huruf kapital, gunakan ${variabel^^}. InsyaAllah, akan datang pembahasan tersendiri mengenai Parameter Expansion Bash.\n💡 Sintaks read -r nama kota ... diatas, akan menghasilkan variabel dengan nama-nama tersebut, sesuai dengan urutan di dalam file inputnya.\nMisal, baris-baris dalam file input tersebut memiliki kolom-kolom berikut:\nNo Nama Email Password maka, pada sintaks read ke-empat kolom tersebut bisa langsung disematkan kepada variabel dengan cara menyebutkan nama variabel sasuai dengan urutannya:\nread -r no nama email password Variabel bisa diberi nama secara bebas, seperti:\nread -r kol1 kol2 kol3 kol4 Contoh diatas akan menghasilkan output berikut:\n$ while IFS=, read -r nama kota umur pekerjaan; do \u003e echo \"Email: ${nama,,}.${kota,,}@mail.co.id\" \u003e done \u003c file.csv Email: fulan.surabya@mail.co.id Email: joko.pacitan@mail.co.id Email: ahmad.tangerang@mail.co.id Email: abbas.malang@mail.co.id Kemudian, jika file csv-nya memiliki delimiter berupa tab. Maka IFS bisa diset menjadi IFS=$'\\t'.\nKesimpulan Pada Bash, melakukan pembacaan baris-per-baris dari suatu file, bisa menggunakan for dan while loop. Untuk while loop, bisa melakukan looping pada pipe atau langsung menggunakan stdin (\u003c).\nNamun jika menggunakan pipe, maka penyematan variabel akan diabaikan.\nSekian artikel kali ini, semoga bermanfaat barakallahufiikum.\n","wordCount":"871","inLanguage":"id","datePublished":"2023-07-28T19:40:22+07:00","dateModified":"2023-07-28T19:40:22+07:00","author":[{"@type":"Person","name":"Muhammad Ahfas An Nahri"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.annahri.com/posts/belajar-bash-scripting-membaca-file-dan-membaca-tiap-barisnya/"},"publisher":{"@type":"Organization","name":"Linux \u0026 Cloud | blog.annahri.com","logo":{"@type":"ImageObject","url":"https://blog.annahri.com/favicon.ico"}}}</script></head><body class=dark id=top><header class=header><nav class=nav><div class=logo><a href=https://blog.annahri.com/ accesskey=h title="Linux & Cloud | blog.annahri.com (Alt + H)">Linux & Cloud | blog.annahri.com</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://blog.annahri.com/arsip/ title=Arsip><span>Arsip</span></a></li><li><a href=https://blog.annahri.com/categories/ title=Kategori><span>Kategori</span></a></li><li><a href=https://blog.annahri.com/tags/ title=Tagar><span>Tagar</span></a></li><li><a href=https://blog.annahri.com/cari/ title=Pencarian><span>Pencarian</span></a></li><li><a href=https://blog.annahri.com/tentang/ title=Tentang><span>Tentang</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://blog.annahri.com/>Beranda</a>&nbsp;»&nbsp;<a href=https://blog.annahri.com/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Belajar Bash Scripting: Membaca File dan Membaca Tiap Barisnya</h1><div class=post-meta><span class=post-date date-time='2023-07-28 19:40:22 +0700 +0700'>28 Juli 2023</span>&nbsp;·&nbsp;5 menit&nbsp;·&nbsp;Muhammad Ahfas An Nahri&nbsp;|&nbsp;<a href=https://github.com/annahri/blog.annahri.com/tree/main/content/posts/belajar-bash-scripting-membaca-file-dan-membaca-tiap-barisnya.md rel="noopener noreferrer" target=_blank>Sarankan Pengubahan</a></div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Daftar isi</span></summary><div class=inner><ul><li><a href=#mukadimah aria-label=Mukadimah>Mukadimah</a></li><li><a href=#membaca-file aria-label="Membaca File">Membaca File</a><ul><li><a href=#menyimpan-isi-file-kedalam-variabel aria-label="Menyimpan isi file kedalam variabel">Menyimpan isi file kedalam variabel</a></li><li><a href=#membaca-file-baris-per-baris aria-label="Membaca file baris-per-baris">Membaca file baris-per-baris</a><ul><li><a href=#loop-menggunakan-pipe aria-label="Loop menggunakan pipe">Loop menggunakan pipe</a></li><li><a href=#loop-tanpa-pipe aria-label="Loop tanpa pipe">Loop tanpa pipe</a></li></ul></li><li><a href=#membaca-file-csv aria-label="Membaca file csv">Membaca file csv</a></li></ul></li><li><a href=#kesimpulan aria-label=Kesimpulan>Kesimpulan</a></li></ul></div></details></div><div class=post-content><p><img loading=lazy src=/images/bismillah-2.png#center alt=Bismillah></p><h1 id=mukadimah>Mukadimah<a hidden class=anchor aria-hidden=true href=#mukadimah>#</a></h1><p>Dalam menulis script, terkadang kita ingin menjalankan sekumpulan perintah berdasarkan data yang ada pada suatu file (baik raw file, csv, dsb). Kemudian juga terkadang, kita ingin menuliskan suatu script yang menghasilkan suatu file berupa log, atau data terstruktur seperti csv, dan sebagainya.</p><p>Maka, pada seri tulisan &ldquo;Belajar Bash Scripting&rdquo; kali ini, saya akan membahas mengenai bagaimana cara membaca dan menghasilkan suatu file pada <code>bash</code>.</p><h1 id=membaca-file>Membaca File<a hidden class=anchor aria-hidden=true href=#membaca-file>#</a></h1><p>Secara umum, suatu file teks bisa dibaca menggunakan perintah <code>cat</code>:</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>$ cat file.txt
</span></span><span style=display:flex><span>pertama
</span></span><span style=display:flex><span>kedua
</span></span><span style=display:flex><span>ketiga
</span></span><span style=display:flex><span>keempat
</span></span><span style=display:flex><span>kelima
</span></span></code></pre></div><style>.callout{color:#f7f4ef;background:#3e3e4f;padding:1em 1.25em;border-radius:3px;display:flex;flex-direction:row;margin:20px auto}.callout code{background-color:transparent}.callout-inner{margin-left:1em}r .callout div p{margin:0}@media(max-width:767px){.callout{padding:1.5em .75em 1.5em .6em}.callout-inner{margin-left:.5em}}</style><div class=callout><div>💡</div><div class=callout-inner><p>Sebenarnya, perintah <code>cat</code> ini berfungsi untuk menggabungkan file menjadi 1 dan menampilkannya pada <code>stdout</code>.</p><p>Karena fungsinya demikian, ketika argumen yang diberikan hanyalah 1 saja, maka tentu yang muncul hanya isi dari file tersebut. Dengan demikian, hal tersebut bisa dimanfaatkan untuk keperluan &ldquo;membaca isi file&rdquo;.</p></div></div><p>Biasanya <code>cat</code> digunakan untuk membaca/membuka file yang kemudian akan diproses menggunakan perintah lain agar mudah dibaca. Beberapa perintah mendukung input langsung melalui <code>stdin</code> sehingga <code>cat</code> tidak diperlukan.</p><h2 id=menyimpan-isi-file-kedalam-variabel>Menyimpan isi file kedalam variabel<a hidden class=anchor aria-hidden=true href=#menyimpan-isi-file-kedalam-variabel>#</a></h2><p>Menggunakan <em>process substitution</em>:</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>var1<span style=color:#fe8019>=</span><span style=color:#b8bb26>&#34;</span><span style=color:#fe8019>$(</span>cat file.txt<span style=color:#fe8019>)</span><span style=color:#b8bb26>&#34;</span>
</span></span><span style=display:flex><span>var2<span style=color:#fe8019>=</span><span style=color:#b8bb26>&#34;</span><span style=color:#fe8019>$(</span>cat file.txt | ...<span style=color:#fe8019>)</span><span style=color:#b8bb26>&#34;</span>
</span></span></code></pre></div><p>Menggunakan <code>printf</code>:</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#fabd2f>printf</span> -v var1 <span style=color:#b8bb26>&#39;%s\n&#39;</span> <span style=color:#b8bb26>&#34;</span><span style=color:#fe8019>$(</span>cat file.txt<span style=color:#fe8019>)</span><span style=color:#b8bb26>&#34;</span>
</span></span></code></pre></div><h2 id=membaca-file-baris-per-baris>Membaca file baris-per-baris<a hidden class=anchor aria-hidden=true href=#membaca-file-baris-per-baris>#</a></h2><p>Ada beberapa cara untuk melakukan hal ini, tergantung dengan tujuannya. Namun, seluruhnya menggunakan loop, baik <code>for</code> atau <code>while</code></p><ol><li>Jika hanya melakukan suatu proses <strong>tanpa adanya penyematan variabel</strong>, maka bisa menggunakan pipe. Hanya bisa dengan <code>while</code> loop saja.</li><li>Jika melakukan suatu proses <strong>dengan adanya penyematan variabel</strong> didalamnya, maka pipe tidak bisa digunakan. Bisa menggunakan <code>for</code> atau <code>while</code> loop.</li></ol><style>.callout{color:#f7f4ef;background:#3e3e4f;padding:1em 1.25em;border-radius:3px;display:flex;flex-direction:row;margin:20px auto}.callout code{background-color:transparent}.callout-inner{margin-left:1em}r .callout div p{margin:0}@media(max-width:767px){.callout{padding:1.5em .75em 1.5em .6em}.callout-inner{margin-left:.5em}}</style><div class=callout><div>💡</div><div class=callout-inner><p>Semua proses yang berjalan didalam pipeline, itu berjalan pada subshell. Pada subshell, semua penyematan variabel hanya berdampak pada lingkup subshell itu sendiri dan tidak terekspos ke shell diatasnya.</p></div></div><h3 id=loop-menggunakan-pipe>Loop menggunakan pipe<a hidden class=anchor aria-hidden=true href=#loop-menggunakan-pipe>#</a></h3><p>Menggunakan kombinasi <code>while read</code> dengan inputan dari pipe:</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cat file.txt | <span style=color:#fe8019>while</span> <span style=color:#fabd2f>read</span> -r line; <span style=color:#fe8019>do</span>
</span></span><span style=display:flex><span>    <span style=color:#fabd2f>echo</span> <span style=color:#b8bb26>&#34;Baris: </span>$line<span style=color:#b8bb26>&#34;</span>
</span></span><span style=display:flex><span>    ...
</span></span><span style=display:flex><span>    ...
</span></span><span style=display:flex><span><span style=color:#fe8019>done</span>
</span></span></code></pre></div><p>Pada contoh diatas, tiap baris yang ada pada file, bisa diakses menggunakan variabel <code>$line</code> (bisa diganti sesuai keinginan, <code>while read -r baris</code> misalnya) dan berurutan. Dalam bentuk seperti ini, semua penyematan variabel tidak akan tersimpan.</p><h3 id=loop-tanpa-pipe>Loop tanpa pipe<a hidden class=anchor aria-hidden=true href=#loop-tanpa-pipe>#</a></h3><p>Masih menggunakan kombinasi <code>while read</code> dengan inputan dari <code>&lt;</code>:</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#fe8019>while</span> <span style=color:#fabd2f>read</span> -r line; <span style=color:#fe8019>do</span>
</span></span><span style=display:flex><span>    <span style=color:#fabd2f>echo</span> <span style=color:#b8bb26>&#34;Baris: </span>$line<span style=color:#b8bb26>&#34;</span>
</span></span><span style=display:flex><span>    ...
</span></span><span style=display:flex><span>    ...
</span></span><span style=display:flex><span><span style=color:#fe8019>done</span> &lt; file.txt
</span></span></code></pre></div><p>Metode yang ini digunakan apabile jika operasi yang ingin dilakukan terdapat penyematan variabel berdasarkan data yang ada pada baris yang dibaca.</p><p>Loop <code>for</code> juga bisa digunakan, namun secara asal (<em>default</em>), akan bermasalah jika baris yang ada di dalam file itu lebih dari 1 kata (dipisahkan dengan spasi):</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#fe8019>for</span> line in <span style=color:#fe8019>$(</span>cat file.txt<span style=color:#fe8019>)</span>; <span style=color:#fe8019>do</span>
</span></span><span style=display:flex><span>    <span style=color:#fabd2f>echo</span> <span style=color:#b8bb26>&#34;Baris: </span>$line<span style=color:#b8bb26>&#34;</span>
</span></span><span style=display:flex><span>    ...
</span></span><span style=display:flex><span>    ...
</span></span><span style=display:flex><span><span style=color:#fe8019>done</span>
</span></span></code></pre></div><p>Untuk mengatasi limitasi diatas, perlu mengatur variabel internal <code>IFS</code> (<em>Internal Field Separator</em>) untuk memberitahu <code>for</code>, pada momen apa suatu baris itu berganti.</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>OIFS<span style=color:#fe8019>=</span>$IFS  <span style=color:#928374;font-style:italic># Menyimpan value awal IFS</span>
</span></span><span style=display:flex><span>IFS<span style=color:#fe8019>=</span><span style=color:#b8bb26>$&#39;\n&#39;</span>  <span style=color:#928374;font-style:italic># Mengganti isi IFS menjadi newline (ganti baris)</span>
</span></span><span style=display:flex><span><span style=color:#fe8019>for</span> line in <span style=color:#fe8019>$(</span>cat file.txt<span style=color:#fe8019>)</span>; <span style=color:#fe8019>do</span>
</span></span><span style=display:flex><span>    <span style=color:#fabd2f>echo</span> <span style=color:#b8bb26>&#34;Baris: </span>$line<span style=color:#b8bb26>&#34;</span>
</span></span><span style=display:flex><span>    ...
</span></span><span style=display:flex><span>    ...
</span></span><span style=display:flex><span><span style=color:#fe8019>done</span>
</span></span><span style=display:flex><span>IFS<span style=color:#fe8019>=</span>$OIFS <span style=color:#928374;font-style:italic># Mengembalikan value IFS menjadi seperti awal</span>
</span></span></code></pre></div><style>.callout{color:#f7f4ef;background:#3e3e4f;padding:1em 1.25em;border-radius:3px;display:flex;flex-direction:row;margin:20px auto}.callout code{background-color:transparent}.callout-inner{margin-left:1em}r .callout div p{margin:0}@media(max-width:767px){.callout{padding:1.5em .75em 1.5em .6em}.callout-inner{margin-left:.5em}}</style><div class=callout><div>💡</div><div class=callout-inner><p>Secara asal, variabel <code>IFS</code> berisikan 1 spasi. Sehingga <code>for</code> (dan perintah lain) akan memaknai ganti &ldquo;kolom&rdquo; ketika bertemu spasi.</p></div></div><p>Contoh tanpa mengganti <code>IFS</code>:</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ cat file.txt
</span></span><span style=display:flex><span>baris satu
</span></span><span style=display:flex><span>baris dua
</span></span><span style=display:flex><span>baris tiga
</span></span><span style=display:flex><span>baris empat
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ <span style=color:#fe8019>for</span> line in <span style=color:#fe8019>$(</span>cat file.txt<span style=color:#fe8019>)</span>; <span style=color:#fe8019>do</span>
</span></span><span style=display:flex><span>&gt; <span style=color:#fabd2f>echo</span> <span style=color:#b8bb26>&#34;</span><span style=color:#fe8019>$((</span><span style=color:#fe8019>++</span>i<span style=color:#fe8019>))</span><span style=color:#b8bb26>: </span>$line<span style=color:#b8bb26>&#34;</span>
</span></span><span style=display:flex><span>&gt; <span style=color:#fe8019>done</span>
</span></span><span style=display:flex><span>1: baris
</span></span><span style=display:flex><span>2: satu
</span></span><span style=display:flex><span>3: baris
</span></span><span style=display:flex><span>4: dua
</span></span><span style=display:flex><span>5: baris
</span></span><span style=display:flex><span>6: tiga
</span></span><span style=display:flex><span>7: baris
</span></span><span style=display:flex><span>8: empat
</span></span></code></pre></div><p>Hasilnya adalah setiap barisnya akan terpecah (<em>split</em>) pada spasi, sehingga menjadi tidak sesuai harapan.</p><p>Contoh dengan mengganti <code>IFS</code>:</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ cat file.txt
</span></span><span style=display:flex><span>baris satu
</span></span><span style=display:flex><span>baris dua
</span></span><span style=display:flex><span>baris tiga
</span></span><span style=display:flex><span>baris empat
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ OIFS<span style=color:#fe8019>=</span>$IFS
</span></span><span style=display:flex><span>$ IFS<span style=color:#fe8019>=</span><span style=color:#b8bb26>$&#39;\n&#39;</span>
</span></span><span style=display:flex><span>$ <span style=color:#fe8019>for</span> line in <span style=color:#fe8019>$(</span>cat file.txt<span style=color:#fe8019>)</span>; <span style=color:#fe8019>do</span>
</span></span><span style=display:flex><span>&gt; <span style=color:#fabd2f>echo</span> <span style=color:#b8bb26>&#34;</span><span style=color:#fe8019>$((</span><span style=color:#fe8019>++</span>i<span style=color:#fe8019>))</span><span style=color:#b8bb26>: </span>$line<span style=color:#b8bb26>&#34;</span>
</span></span><span style=display:flex><span>&gt; <span style=color:#fe8019>done</span>
</span></span><span style=display:flex><span>1: baris satu
</span></span><span style=display:flex><span>2: baris dua
</span></span><span style=display:flex><span>3: baris tiga
</span></span><span style=display:flex><span>4: baris empat
</span></span></code></pre></div><h2 id=membaca-file-csv>Membaca file csv<a hidden class=anchor aria-hidden=true href=#membaca-file-csv>#</a></h2><p>File <code>csv</code> adalah suatu file yang tiap barisnya berisikan kolom-kolom yang dipisahkan (<em>delimiter</em> atau <em>separator</em>) dengan tanda koma <code>,</code> (atau <em>separator</em> yang lain, seperti spasi, tab, dsb).</p><p>Contoh file csv:</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ cat file.csv
</span></span><span style=display:flex><span>Fulan,Surabya,24,Swasta
</span></span><span style=display:flex><span>Joko,Pacitan,30,PNS
</span></span><span style=display:flex><span>Ahmad,Tangerang,29,Swasta
</span></span><span style=display:flex><span>Abbas,Malang,40,Wiraswasta
</span></span></code></pre></div><p>Misal, kita ingin membuat script untuk meng-<em>generate</em> alamat email berdasarkan data diatas. Maka, kita bisa menggunakan kombinasi <code>while read</code> loop dan IFS untuk memisahkan masing-masing kolomnya.</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#fe8019>while</span> IFS<span style=color:#fe8019>=</span>, <span style=color:#fabd2f>read</span> -r nama kota umur pekerjaan; <span style=color:#fe8019>do</span>
</span></span><span style=display:flex><span>    <span style=color:#fabd2f>echo</span> <span style=color:#b8bb26>&#34;Email: </span><span style=color:#b8bb26>${</span>nama,,<span style=color:#b8bb26>}</span><span style=color:#b8bb26>.</span><span style=color:#b8bb26>${</span>kota,,<span style=color:#b8bb26>}</span><span style=color:#b8bb26>@mail.co.id&#34;</span>
</span></span><span style=display:flex><span><span style=color:#fe8019>done</span> &lt; file.csv
</span></span></code></pre></div><style>.callout{color:#f7f4ef;background:#3e3e4f;padding:1em 1.25em;border-radius:3px;display:flex;flex-direction:row;margin:20px auto}.callout code{background-color:transparent}.callout-inner{margin-left:1em}r .callout div p{margin:0}@media(max-width:767px){.callout{padding:1.5em .75em 1.5em .6em}.callout-inner{margin-left:.5em}}</style><div class=callout><div>💡</div><div class=callout-inner><p>Sintaks <code>${variabel,,}</code> merupakan salah satu dari fungsi <em>Parameter Expansion</em> dari Bash untuk mengubah isi variabel menjadi huruf kecil seluruhnya. Untuk menjadikan seluruhnya huruf kapital, gunakan <code>${variabel^^}</code>. <em>InsyaAllah</em>, akan datang pembahasan tersendiri mengenai <em>Parameter Expansion</em> Bash.</p></div></div><style>.callout{color:#f7f4ef;background:#3e3e4f;padding:1em 1.25em;border-radius:3px;display:flex;flex-direction:row;margin:20px auto}.callout code{background-color:transparent}.callout-inner{margin-left:1em}r .callout div p{margin:0}@media(max-width:767px){.callout{padding:1.5em .75em 1.5em .6em}.callout-inner{margin-left:.5em}}</style><div class=callout><div>💡</div><div class=callout-inner><p>Sintaks <code>read -r nama kota ...</code> diatas, akan menghasilkan variabel dengan nama-nama tersebut, sesuai dengan urutan di dalam file inputnya.</p><p>Misal, baris-baris dalam file input tersebut memiliki kolom-kolom berikut:</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>No Nama Email Password
</span></span></code></pre></div><p>maka, pada sintaks <code>read</code> ke-empat kolom tersebut bisa langsung disematkan kepada variabel dengan cara menyebutkan nama variabel sasuai dengan urutannya:</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#fabd2f>read</span> -r no nama email password
</span></span></code></pre></div><p>Variabel bisa diberi nama secara bebas, seperti:</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#fabd2f>read</span> -r kol1 kol2 kol3 kol4
</span></span></code></pre></div></div></div><p>Contoh diatas akan menghasilkan output berikut:</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ <span style=color:#fe8019>while</span> IFS<span style=color:#fe8019>=</span>, <span style=color:#fabd2f>read</span> -r nama kota umur pekerjaan; <span style=color:#fe8019>do</span>
</span></span><span style=display:flex><span>&gt;   <span style=color:#fabd2f>echo</span> <span style=color:#b8bb26>&#34;Email: </span><span style=color:#b8bb26>${</span>nama,,<span style=color:#b8bb26>}</span><span style=color:#b8bb26>.</span><span style=color:#b8bb26>${</span>kota,,<span style=color:#b8bb26>}</span><span style=color:#b8bb26>@mail.co.id&#34;</span>
</span></span><span style=display:flex><span>&gt; <span style=color:#fe8019>done</span> &lt; file.csv
</span></span><span style=display:flex><span>Email: fulan.surabya@mail.co.id
</span></span><span style=display:flex><span>Email: joko.pacitan@mail.co.id
</span></span><span style=display:flex><span>Email: ahmad.tangerang@mail.co.id
</span></span><span style=display:flex><span>Email: abbas.malang@mail.co.id
</span></span></code></pre></div><p>Kemudian, jika file csv-nya memiliki <em>delimiter</em> berupa tab. Maka <code>IFS</code> bisa diset menjadi <code>IFS=$'\t'</code>.</p><h1 id=kesimpulan>Kesimpulan<a hidden class=anchor aria-hidden=true href=#kesimpulan>#</a></h1><p>Pada Bash, melakukan pembacaan baris-per-baris dari suatu file, bisa menggunakan <code>for</code> dan <code>while</code> loop. Untuk <code>while</code> loop, bisa melakukan looping pada pipe atau langsung menggunakan <code>stdin</code> (<code>&lt;</code>).</p><p>Namun jika menggunakan pipe, maka penyematan variabel akan diabaikan.</p><p>Sekian artikel kali ini, semoga bermanfaat <em>barakallahufiikum</em>.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.annahri.com/tags/bash/>bash</a></li><li><a href=https://blog.annahri.com/tags/scripting/>scripting</a></li></ul><nav class=paginav><a class=prev href=https://blog.annahri.com/posts/memonitor-file-folder-dengan-systemd-path/><span class=title>« Sebelumnya</span><br><span>Memonitor File/Folder dengan Systemd Path Unit</span>
</a><a class=next href=https://blog.annahri.com/posts/docker-mengupdate-restart-policy-container/><span class=title>Selanjutnya »</span><br><span>Docker: Mengupdate Restart Policy Container (tanpa recreate)</span></a></nav></footer><script src=https://giscus.app/client.js data-repo=annahri/blog.annahri.com data-repo-id=423672062 data-category=Announcements data-category-id=DIC_kwDOGUC4_s4CdOMw data-mapping=pathname data-reactions-enabled=0 data-emit-metadata=0 data-input-position=top data-theme=dark_dimmed data-lang=id data-loading=lazy crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2024 <a href=https://blog.annahri.com/>Linux & Cloud | blog.annahri.com</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="salin";function s(){t.innerHTML="disalin!",setTimeout(()=>{t.innerHTML="salin"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>