<!doctype html><html lang=id dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Jurnal: Menyelamatkan Partisi LVM Yang Metadatanya Tertimpa | Linux & Cloud | blog.annahri.com</title>
<meta name=keywords content="LVM"><meta name=description content="Mukadimah Pada artikel ini, saya akan menceritakan bagaimana saya berhasil menyelamankan dan mengembalikan paritisi LVM yang hilang metadatanya karena tertimpa oleh metadata SWAP.
Hal ini terjadi diduga karena sang &ldquo;user&rdquo; nampaknya ingin membesar kapasitas RAM dengan menambah ukuran SWAP. Alih-alih membuatnya pada suatu file atau partisi baru, si &ldquo;user&rdquo; tersebut membuatnya di partisi dimana root disk berada.
Sejurus kemudian, muncullah permintaan reboot VM yang dimaksud. Tanpa pikir panjang, rekan saya melakukan reboot."><meta name=author content="Muhammad Ahfas An Nahri"><link rel=canonical href=https://blog.annahri.com/posts/jurnal-menyelamatkan-partisi-lvm-yang-rusak/><link crossorigin=anonymous href=/assets/css/stylesheet.132d99d4d98a75b27051b5015ea59ebe1cfa5b80dc64565f1d525d82a1abd2a0.css integrity="sha256-Ey2Z1NmKdbJwUbUBXqWevhz6W4DcZFZfHVJdgqGr0qA=" rel="preload stylesheet" as=style><link rel=icon href=https://s3-jak01.storageraya.com/ahf-testcdn/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.annahri.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.annahri.com/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.annahri.com/apple-touch-icon.png><link rel=mask-icon href=https://blog.annahri.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><link rel=stylesheet href=https://blog.annahri.com/css/custom_papermod.css><script async src="https://www.googletagmanager.com/gtag/js?id=G-CY69EEKCTJ"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-CY69EEKCTJ",{anonymize_ip:!1})}</script><meta property="og:title" content="Jurnal: Menyelamatkan Partisi LVM Yang Metadatanya Tertimpa"><meta property="og:description" content="Mukadimah Pada artikel ini, saya akan menceritakan bagaimana saya berhasil menyelamankan dan mengembalikan paritisi LVM yang hilang metadatanya karena tertimpa oleh metadata SWAP.
Hal ini terjadi diduga karena sang &ldquo;user&rdquo; nampaknya ingin membesar kapasitas RAM dengan menambah ukuran SWAP. Alih-alih membuatnya pada suatu file atau partisi baru, si &ldquo;user&rdquo; tersebut membuatnya di partisi dimana root disk berada.
Sejurus kemudian, muncullah permintaan reboot VM yang dimaksud. Tanpa pikir panjang, rekan saya melakukan reboot."><meta property="og:type" content="article"><meta property="og:url" content="https://blog.annahri.com/posts/jurnal-menyelamatkan-partisi-lvm-yang-rusak/"><meta property="og:image" content="https://blog.annahri.com/posts/jurnal-menyelamatkan-partisi-lvm-yang-rusak/lvm_testdisk_recovery.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-09-22T21:59:32+07:00"><meta property="article:modified_time" content="2022-09-22T21:59:32+07:00"><meta property="og:site_name" content="Linux & Cloud | blog.annahri.com"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.annahri.com/posts/jurnal-menyelamatkan-partisi-lvm-yang-rusak/lvm_testdisk_recovery.jpg"><meta name=twitter:title content="Jurnal: Menyelamatkan Partisi LVM Yang Metadatanya Tertimpa"><meta name=twitter:description content="Mukadimah Pada artikel ini, saya akan menceritakan bagaimana saya berhasil menyelamankan dan mengembalikan paritisi LVM yang hilang metadatanya karena tertimpa oleh metadata SWAP.
Hal ini terjadi diduga karena sang &ldquo;user&rdquo; nampaknya ingin membesar kapasitas RAM dengan menambah ukuran SWAP. Alih-alih membuatnya pada suatu file atau partisi baru, si &ldquo;user&rdquo; tersebut membuatnya di partisi dimana root disk berada.
Sejurus kemudian, muncullah permintaan reboot VM yang dimaksud. Tanpa pikir panjang, rekan saya melakukan reboot."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.annahri.com/posts/"},{"@type":"ListItem","position":2,"name":"Jurnal: Menyelamatkan Partisi LVM Yang Metadatanya Tertimpa","item":"https://blog.annahri.com/posts/jurnal-menyelamatkan-partisi-lvm-yang-rusak/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Jurnal: Menyelamatkan Partisi LVM Yang Metadatanya Tertimpa","name":"Jurnal: Menyelamatkan Partisi LVM Yang Metadatanya Tertimpa","description":"Mukadimah Pada artikel ini, saya akan menceritakan bagaimana saya berhasil menyelamankan dan mengembalikan paritisi LVM yang hilang metadatanya karena tertimpa oleh metadata SWAP.\nHal ini terjadi diduga karena sang \u0026ldquo;user\u0026rdquo; nampaknya ingin membesar kapasitas RAM dengan menambah ukuran SWAP. Alih-alih membuatnya pada suatu file atau partisi baru, si \u0026ldquo;user\u0026rdquo; tersebut membuatnya di partisi dimana root disk berada.\nSejurus kemudian, muncullah permintaan reboot VM yang dimaksud. Tanpa pikir panjang, rekan saya melakukan reboot.","keywords":["LVM"],"articleBody":" Mukadimah Pada artikel ini, saya akan menceritakan bagaimana saya berhasil menyelamankan dan mengembalikan paritisi LVM yang hilang metadatanya karena tertimpa oleh metadata SWAP.\nHal ini terjadi diduga karena sang “user” nampaknya ingin membesar kapasitas RAM dengan menambah ukuran SWAP. Alih-alih membuatnya pada suatu file atau partisi baru, si “user” tersebut membuatnya di partisi dimana root disk berada.\nSejurus kemudian, muncullah permintaan reboot VM yang dimaksud. Tanpa pikir panjang, rekan saya melakukan reboot. Ditunggu beberapa saat kok tidak kunjung UP, diintiplah via console, dan jeng-jeng-jeng, sistem gagal booting dan fallback ke initramfs dengan pesan error bahwa logical volume untuk root partition tidak ditemukan.\nPemecahan masalah Melihat pesan error yang muncul pada saat booting tersebut, ada inidikasi bahwa root partition telah “rusak” dan sistem tidak mengenalinya lagi atau bahkan tidak menemukannya.\nKemudian, pengecekan menggunakan Live Image ISO Ubuntu 18.04, bisa didapati bahwa susunan layout partisi adalah layout standar jika Ubuntu diinstall menggunakan opsi Guided LVM. yaitu partisi boot terpisah dan sisanya untuk LVM:\nSaat dicek menggunakan blkid, tertulis bahwa sda5 adalah partisi SWAP sedangkan fdisk menunjukkan bahwa sda5 adalah partisi LVM. Dari sini saya berasumsi bahwa yang terjadi adalah sempat ada upaya untuk membuat partisi SWAP namun keliru dan menimpa metadata LVM pada partisi sda5.\nKemudian, saya coba untuk memuat partisi LVM tersebut dengan memindainya menggunakan lvmdiskscan. Dalam situasi normal dan ideal, seharusnya tool tersebut akan memberikan output seperti ini:\nroot@host:~# lvmdiskscan | grep -v loop /dev/localhost/root [ 16.27 GiB] /dev/sda1 [ 1.40 GiB] /dev/localhost/swap [ 2.33 GiB] /dev/sda5 [ 23.60 GiB] LVM physical volume 2 disks 4 partitions 0 LVM physical volume whole disks 1 LVM physical volume Dimana partisi LVM akan bisa dideteksi dan diidentifikasi. Jika demikian kondisinya, maka cukup dimuat dengan cara berikut:\n# pvscan # vgscan # vgchange -ay # mount ... Namun kondisinya adalah, partisi yang ditengarai sebagai LVM tersebut tidak dikenali oleh sistem sebagai partisi LVM yang valid karena telah rusak metadatanya.\nBermodalkan dengan sedikit kemampuan googling, saya menemukan beberapa artikel yang menunjukkan bagaimana cara memulihkan partisi LVM2 beserta anak-anaknya (PV, VG, LV dan metadatanya). Diantara artikel yang paling membantu adalah ini.\nDi artikel tersebut dijelaskan, yang pada intinya, bahwa hal yang berperan penting dalam pemulihan tersebut adalah file backup metadata LVM, yang secara asal, selalu disimpan di /etc/lvm/backup/\nPertanyaannya, bagaimana cara mendapatkan file tersebut dalam keadaan file itu ada di dalam partisi yang “rusak” dan tidak bisa dimount tersebut?\nIseng-iseng saya coba untuk melakukan less -sr pada partisi yang dimaksud, dan hasilnya, partisi tersebut bisa dilihat bahwa file-file yang ada didalamnya bisa dibaca. Alhamdulillah, sebuah titik terang yang berarti file metadata yang dicari, seharusnya bisa “diambil”.\nBerkenalan dengan sang tool “penyelamat” Kembali menyelami tumpukan jerami google demi mencari sang “jarum”, satu ketemulah satu forum yang sedang membahas permasalahan yang serupa (tapi berbeda). Salah satu jawabannya menjelaskan tentang tool testdisk yang mampu melakukan recovery file pada suatu partisi yang diduga “rusak” atau memang benar-benar rusak.\nSingkat cerita, cukup dengan menjalankan testdisk /dev/sda5, kemudian dilakukan pemindaiaan, dan akhirnya muncul TUI (Text-based User Interface) seperti file explorer yang mana kita bisa eksplorasi file-file di dalam partisi yang sedang diperiksa tersebut, lengkap dengan struktur direktorinya juga! Masya Allah, mantap betul tool ini!\nDengan bantuan tool tersebut, file metadata backup yang dicari-pun berhasil untuk didapatkan!\nPemulihan partisi LVM Pembuatan ulang PV (Physical Volumes) kini bisa dilakukan dengan bermodalkan file backup tadi. Tetapi sebelunya perlu dicatat UUID dari partisi LVM yang hendak dibuat ulang tersebut. Ini bisa didapatkan dengan membuka file backup tadi, kemudian mencocokkannya dengan hasil UUID yang didapatkan via perintah blkid.\nPada bagian bawah tangkapan layar diatas, UUID yang dimaksud ada di bagian:\npv0 { id = UUID \u003c----------------------- DISINI device = /dev/sda5 # Hint Only ... Kemudian, copy UUID tersebut yang nantinya akan digunakan untuk membuat ulang partisi LVM. Perintahnya adalah seperti ini:\npvcreate --restorefile --uuid /dev/sdaX Dapat diperhatikan pada tangkapan layar sebelumnya, terdapat pesan warning yang berbunyi “swap signature detected on /dev/sda5”. Sehingga, memang benar dugaan kuat di awal terkait penyebab rusaknya partisi LVM ini.\nKemudian jika dicek menggunakan pvs atau pvdisplay, maka tentu PV yang dimaksud akan muncul.\nLangkah selanjutnya adalah memulihkan VG (Volume Group) yang ada di dalam PV tersebut. Caranya cukup dengan menjalankan perintah berikut:\nvgcfgrestore -f Kemudian aktifkan seluruh LV (Logical Volumes) yang ada di VG tersebut dengan cara:\nvgchange -ay Dengan demikian, jika dicek menggunakan lvs atau lsblk, maka akan muncul semua LV yang ada:\nNah, disini muncul permasalahan baru. Kenapa UUID untuk masing-masing LV kok tidak terlihat di output lsblk diatas? Dari sini sempat saya coba untuk mount /dev/localhost/root /mnt tetapi hasilnya gagal dengan error “…wrong fs type…”\nSetelah ditelusuri lebih lanjut, jika melihat pada pesan error yang muncul saat mengaktifkan VG, ada indikasi bahwa partisi /dev/sda5 memiliki ukuran sektor yang lebih kecil daripada ukuran PV. Maka, kemungkinannya adalah, dengan adanya perbedaan ukuran tersebut, tiap-tiap partisi LV, memiliki starting sektor yang tergeser. Sehingga, metadata yang ada didalamnya tidak dikenali oleh sistem, dan UUID tidak muncul sebagaimana mestinya.\nSetelah brainstorming dengan rekan senior saya, diputuskan untuk membuat ulang susunan partisi menggunakan fdisk. Singkatnya, saya hapus partisi 5 (lvm) kemudian partisi 2 (extended), setelah itu buat partisi baru lagi dengan susunan yang sama.\nDan perlu diperhatikan pula, saat membuat ulang partisi ke 5, jangan sampai menghapus LVM2_member signaturenya. Setelah itu, sistem perlu direboot karena partisi LVM tersebut masih “terpakai”.\nKemudian, setelah reboot (setelah mengatur live cd, dst), maka sekarang tiap partisi LV sudah muncul UUIDnya. Nah, disini ketemu dengan permasalahan baru. Partisi /dev/sda5 dan partisi /dev/localhost/swap memiliki UUID yang sama.\nDisini cukup mudah. Tinggal saya buat ulang saja partisi SWAPnya menggunakan mkswap /dev/localhost/swap. Dengan demikian, partisi tersebut akan terlahir kembali dengan UUID baru.\nNah, sekarang pengujian akhir yaitu melakukan uji mounting partisi root dengan mount /dev/localhost/root /mnt, dan hasilnya:\nDisini saya cukup percaya diri bahwa sistem akan berhasil boot, maka langsung reboot saja.\nAlhamdulillah, sistem berhasil dipulihkan!!\nFaidah yang bisa diambil Dari kisah ini, ada beberapa hal penting yang bisa diambil pelajaran:\nBackup data Anda! Seluruh aktivitas diatas terjadi karena tidak adanya backup. Dan perlu untuk ditekankan, bahwa backup seharusnya berada di tempat terpisah dengan objek backup. File penting untuk sistem yang menggunakan filesystem LVM salah satunya adalah file backup metadata yang terletak di /etc/lvm/backup. Jangan lakukan sesuatu yang kita tidak tahu ilmunya, dan yang tidak pada tempatnya. Melakukan sesuatu pada environment production sama seperti berjalan di tepi jurang. Jika ragu, maka serahkan pada yang ahli. Pentingnya skill googling dalam pemecahan masalah. Perlu untuk mengetahui kata kunci yang tepat agar bisa mendapatkan hasil yang juga tepat sasaran. Menurut saya ini adalah skill utama untuk praktisi IT. Sekian artikel kali ini. Semoga memberikan manfaat bagi pembaca, barakallahufiikum.\n","wordCount":"1101","inLanguage":"id","datePublished":"2022-09-22T21:59:32+07:00","dateModified":"2022-09-22T21:59:32+07:00","author":[{"@type":"Person","name":"Muhammad Ahfas An Nahri"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.annahri.com/posts/jurnal-menyelamatkan-partisi-lvm-yang-rusak/"},"publisher":{"@type":"Organization","name":"Linux \u0026 Cloud | blog.annahri.com","logo":{"@type":"ImageObject","url":"https://s3-jak01.storageraya.com/ahf-testcdn/favicon.ico"}}}</script></head><body class=dark id=top><header class=header><nav class=nav><div class=logo><a href=https://blog.annahri.com/ accesskey=h title="Linux & Cloud | blog.annahri.com (Alt + H)">Linux & Cloud | blog.annahri.com</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://blog.annahri.com/arsip/ title=Arsip><span>Arsip</span></a></li><li><a href=https://blog.annahri.com/categories/ title=Kategori><span>Kategori</span></a></li><li><a href=https://blog.annahri.com/tags/ title=Tagar-tagar><span>Tagar-tagar</span></a></li><li><a href=https://blog.annahri.com/cari/ title=Pencarian><span>Pencarian</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://blog.annahri.com/>Beranda</a>&nbsp;»&nbsp;<a href=https://blog.annahri.com/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Jurnal: Menyelamatkan Partisi LVM Yang Metadatanya Tertimpa</h1><div class=post-meta><span class=post-date date-time='2022-09-22 21:59:32 +0700 +0700'>22 September 2022</span>&nbsp;·&nbsp;6 menit&nbsp;·&nbsp;Muhammad Ahfas An Nahri&nbsp;|&nbsp;<a href=https://github.com/annahri/blog.annahri.com/tree/main/content/posts/jurnal-menyelamatkan-partisi-lvm-yang-rusak/index.md rel="noopener noreferrer" target=_blank>Sarankan Pengubahan</a></div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Daftar isi</span></summary><div class=inner><ul><li><a href=#mukadimah aria-label=Mukadimah>Mukadimah</a></li><li><a href=#pemecahan-masalah aria-label="Pemecahan masalah">Pemecahan masalah</a></li><li><a href=#berkenalan-dengan-sang-tool-penyelamat aria-label="Berkenalan dengan sang tool &ldquo;penyelamat&rdquo;">Berkenalan dengan sang tool &ldquo;penyelamat&rdquo;</a></li><li><a href=#pemulihan-partisi-lvm aria-label="Pemulihan partisi LVM">Pemulihan partisi LVM</a></li><li><a href=#faidah-yang-bisa-diambil aria-label="Faidah yang bisa diambil">Faidah yang bisa diambil</a></li></ul></div></details></div><div class=post-content><p><img loading=lazy src=/images/bismillah-2.png#center alt=Bismillah></p><h2 id=mukadimah>Mukadimah<a hidden class=anchor aria-hidden=true href=#mukadimah>#</a></h2><p>Pada artikel ini, saya akan menceritakan bagaimana saya berhasil menyelamankan dan mengembalikan paritisi LVM yang hilang metadatanya karena tertimpa oleh metadata SWAP.</p><p>Hal ini terjadi diduga karena sang &ldquo;user&rdquo; nampaknya ingin membesar kapasitas RAM dengan menambah ukuran SWAP. Alih-alih membuatnya pada suatu file atau partisi baru, si &ldquo;user&rdquo; tersebut membuatnya di partisi dimana <em>root disk</em> berada.</p><p>Sejurus kemudian, muncullah permintaan <em>reboot</em> VM yang dimaksud. Tanpa pikir panjang, rekan saya melakukan <em>reboot</em>. Ditunggu beberapa saat kok tidak kunjung <em>UP</em>, diintiplah via console, dan <em>jeng-jeng-jeng</em>, sistem gagal booting dan <em>fallback</em> ke initramfs dengan pesan error bahwa <em>logical volume</em> untuk root partition tidak ditemukan.</p><p><img loading=lazy src=./lvm_failboot.jpg#center alt="Gagal boot" title="Gagal boot"></p><h2 id=pemecahan-masalah>Pemecahan masalah<a hidden class=anchor aria-hidden=true href=#pemecahan-masalah>#</a></h2><p>Melihat pesan error yang muncul pada saat booting tersebut, ada inidikasi bahwa root partition telah &ldquo;rusak&rdquo; dan sistem tidak mengenalinya lagi atau bahkan tidak menemukannya.</p><p>Kemudian, pengecekan menggunakan <em>Live Image ISO</em> Ubuntu 18.04, bisa didapati bahwa susunan layout partisi adalah layout standar jika Ubuntu diinstall menggunakan opsi <em>Guided LVM</em>. yaitu partisi boot terpisah dan sisanya untuk LVM:</p><p><img loading=lazy src=./lvm_lsblk.jpg#center alt="Hasil lsblk" title=LSBLK></p><p>Saat dicek menggunakan <code>blkid</code>, tertulis bahwa <code>sda5</code> adalah partisi SWAP sedangkan <code>fdisk</code> menunjukkan bahwa <code>sda5</code> adalah partisi LVM. Dari sini saya berasumsi bahwa yang terjadi adalah sempat ada upaya untuk membuat partisi SWAP namun keliru dan menimpa metadata LVM pada partisi <code>sda5</code>.</p><p><img loading=lazy src=./lvm_hasil-blkid.jpg#center alt="Hasil blkid"></p><p><img loading=lazy src=./lvm_hasil-fdisk.jpg#center alt="Hasil fstab"></p><p>Kemudian, saya coba untuk memuat partisi LVM tersebut dengan memindainya menggunakan <code>lvmdiskscan</code>. Dalam situasi normal dan ideal, seharusnya tool tersebut akan memberikan output seperti ini:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>root@host:~# lvmdiskscan  | grep -v loop
</span></span><span style=display:flex><span>  /dev/localhost/root [      16.27 GiB]
</span></span><span style=display:flex><span>  /dev/sda1           [       1.40 GiB]
</span></span><span style=display:flex><span>  /dev/localhost/swap [       2.33 GiB]
</span></span><span style=display:flex><span>  /dev/sda5           [      23.60 GiB] LVM physical volume
</span></span><span style=display:flex><span>  2 disks
</span></span><span style=display:flex><span>  4 partitions
</span></span><span style=display:flex><span>  0 LVM physical volume whole disks
</span></span><span style=display:flex><span>  1 LVM physical volume
</span></span></code></pre></div><p>Dimana partisi LVM akan bisa dideteksi dan diidentifikasi. Jika demikian kondisinya, maka cukup dimuat dengan cara berikut:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span># pvscan
</span></span><span style=display:flex><span># vgscan
</span></span><span style=display:flex><span># vgchange -ay
</span></span><span style=display:flex><span># mount ...
</span></span></code></pre></div><p>Namun kondisinya adalah, partisi yang ditengarai sebagai LVM tersebut tidak dikenali oleh sistem sebagai partisi LVM yang valid karena telah rusak metadatanya.</p><p><img loading=lazy src=./lvm_no-lvm.jpg#center alt="LVM tidak dikenal"></p><p>Bermodalkan dengan sedikit kemampuan <em>googling</em>, saya menemukan beberapa artikel yang menunjukkan bagaimana cara memulihkan partisi LVM2 beserta anak-anaknya (PV, VG, LV dan metadatanya). Diantara artikel yang paling membantu adalah <a href=https://www.golinuxcloud.com/recover-lvm2-partition-restore-vg-pv-metadata/>ini</a>.</p><p>Di artikel tersebut dijelaskan, yang pada intinya, bahwa hal yang berperan penting dalam pemulihan tersebut adalah file <em>backup metadata</em> LVM, yang secara asal, selalu disimpan di <code>/etc/lvm/backup/&lt;nama VG></code></p><p>Pertanyaannya, bagaimana cara mendapatkan file tersebut dalam keadaan file itu ada di dalam partisi yang &ldquo;rusak&rdquo; dan tidak bisa dimount tersebut?</p><p>Iseng-iseng saya coba untuk melakukan <code>less -sr</code> pada partisi yang dimaksud, dan hasilnya, partisi tersebut bisa dilihat bahwa file-file yang ada didalamnya bisa dibaca. Alhamdulillah, sebuah titik terang yang berarti file metadata yang dicari, seharusnya bisa &ldquo;diambil&rdquo;.</p><h2 id=berkenalan-dengan-sang-tool-penyelamat>Berkenalan dengan sang tool &ldquo;penyelamat&rdquo;<a hidden class=anchor aria-hidden=true href=#berkenalan-dengan-sang-tool-penyelamat>#</a></h2><p>Kembali menyelami tumpukan jerami google demi mencari sang &ldquo;jarum&rdquo;, satu ketemulah satu forum yang sedang membahas permasalahan yang serupa (tapi berbeda). Salah satu jawabannya menjelaskan tentang tool <code>testdisk</code> yang mampu melakukan recovery file pada suatu partisi yang diduga &ldquo;rusak&rdquo; atau memang benar-benar rusak.</p><p><img loading=lazy src=./lvm_testdisk_select.jpg#center alt=testdisk></p><p>Singkat cerita, cukup dengan menjalankan <code>testdisk /dev/sda5</code>, kemudian dilakukan pemindaiaan, dan akhirnya muncul TUI (<em>Text-based User Interface</em>) seperti file explorer yang mana kita bisa eksplorasi file-file di dalam partisi yang sedang diperiksa tersebut, lengkap dengan struktur direktorinya juga! <em>Masya Allah</em>, mantap betul tool ini!</p><p><img loading=lazy src=./lvm_testdisk_recovery.jpg#center alt="file backup didapatkan"></p><p>Dengan bantuan tool tersebut, file metadata backup yang dicari-pun berhasil untuk didapatkan!</p><h2 id=pemulihan-partisi-lvm>Pemulihan partisi LVM<a hidden class=anchor aria-hidden=true href=#pemulihan-partisi-lvm>#</a></h2><p>Pembuatan ulang PV (<em>Physical Volumes</em>) kini bisa dilakukan dengan bermodalkan file backup tadi. Tetapi sebelunya perlu dicatat UUID dari partisi LVM yang hendak dibuat ulang tersebut. Ini bisa didapatkan dengan membuka file backup tadi, kemudian mencocokkannya dengan hasil UUID yang didapatkan via perintah <code>blkid</code>.</p><p><img loading=lazy src=./lvm_metadata-backup.jpg#center alt="file metadata backup" title="Isi file metadata backup"></p><p>Pada bagian bawah tangkapan layar diatas, UUID yang dimaksud ada di bagian:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>pv0 {
</span></span><span style=display:flex><span>    id = UUID &lt;----------------------- DISINI
</span></span><span style=display:flex><span>    device = /dev/sda5 # Hint Only
</span></span><span style=display:flex><span>...
</span></span></code></pre></div><p>Kemudian, copy UUID tersebut yang nantinya akan digunakan untuk membuat ulang partisi LVM. Perintahnya adalah seperti ini:</p><p><a href=./lvm_pv-recreate.jpg><img loading=lazy src=./lvm_pv-recreate.jpg#center alt=pvcreate title="Perintah untuk membuat ulang suatu PV dengan backup metadata."></a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>pvcreate --restorefile &lt;file backup&gt; --uuid &lt;uuid&gt; /dev/sdaX
</span></span></code></pre></div><p>Dapat diperhatikan pada tangkapan layar sebelumnya, terdapat pesan <em>warning</em> yang berbunyi &ldquo;<em>swap signature detected on /dev/sda5</em>&rdquo;. Sehingga, memang benar dugaan kuat di awal terkait penyebab rusaknya partisi LVM ini.</p><p>Kemudian jika dicek menggunakan <code>pvs</code> atau <code>pvdisplay</code>, maka tentu PV yang dimaksud akan muncul.</p><p><img loading=lazy src=./lvm_pv-muncul.jpg#center alt="PV muncul" title="PV sudah dikenali oleh sistem."></p><p>Langkah selanjutnya adalah memulihkan VG (<em>Volume Group</em>) yang ada di dalam PV tersebut. Caranya cukup dengan menjalankan perintah berikut:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>vgcfgrestore -f &lt;file backup&gt; &lt;nama VG&gt;
</span></span></code></pre></div><p><img loading=lazy src=./lvm_restore-vg.jpg#center alt="Pemulihan VG"></p><p>Kemudian aktifkan seluruh LV (<em>Logical Volumes</em>) yang ada di VG tersebut dengan cara:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>vgchange -ay
</span></span></code></pre></div><p>Dengan demikian, jika dicek menggunakan <code>lvs</code> atau <code>lsblk</code>, maka akan muncul semua LV yang ada:</p><p><img loading=lazy src=./lvm_uuid-belum-muncul.jpg#center alt=LV></p><p>Nah, disini muncul permasalahan baru. Kenapa UUID untuk masing-masing LV kok tidak terlihat di output <code>lsblk</code> diatas? Dari sini sempat saya coba untuk <code>mount /dev/localhost/root /mnt</code> tetapi hasilnya gagal dengan error &ldquo;&mldr;wrong fs type&mldr;&rdquo;</p><p>Setelah ditelusuri lebih lanjut, jika melihat pada pesan error yang muncul saat mengaktifkan VG, ada indikasi bahwa partisi <code>/dev/sda5</code> memiliki ukuran sektor yang lebih kecil daripada ukuran PV. Maka, kemungkinannya adalah, dengan adanya perbedaan ukuran tersebut, tiap-tiap partisi LV, memiliki <em>starting</em> sektor yang tergeser. Sehingga, metadata yang ada didalamnya tidak dikenali oleh sistem, dan UUID tidak muncul sebagaimana mestinya.</p><p>Setelah brainstorming dengan rekan senior saya, diputuskan untuk membuat ulang susunan partisi menggunakan <code>fdisk</code>. Singkatnya, saya hapus partisi 5 (lvm) kemudian partisi 2 (extended), setelah itu buat partisi baru lagi dengan susunan yang sama.</p><p><img loading=lazy src=./lvm_recreate-partition-table.jpg#center alt="Membuat ulang tabel partisi"></p><p>Dan perlu diperhatikan pula, saat membuat ulang partisi ke 5, jangan sampai menghapus <strong>LVM2_member</strong> signaturenya. Setelah itu, sistem perlu direboot karena partisi LVM tersebut masih &ldquo;terpakai&rdquo;.</p><p>Kemudian, setelah reboot (setelah mengatur live cd, dst), maka sekarang tiap partisi LV sudah muncul UUIDnya. Nah, disini ketemu dengan permasalahan baru. Partisi <code>/dev/sda5</code> dan partisi <code>/dev/localhost/swap</code> memiliki UUID yang sama.</p><p><img loading=lazy src=./lvm_uuid-kembar.jpg#center alt="UUID muncul"></p><p>Disini cukup mudah. Tinggal saya buat ulang saja partisi SWAPnya menggunakan <code>mkswap /dev/localhost/swap</code>. Dengan demikian, partisi tersebut akan terlahir kembali dengan UUID baru.</p><p><img loading=lazy src=./recreate-swap.jpg#center alt="UUID baru"></p><p>Nah, sekarang pengujian akhir yaitu melakukan uji <em>mounting</em> partisi root dengan <code>mount /dev/localhost/root /mnt</code>, dan hasilnya:</p><p><img loading=lazy src=./lvm_mounted.jpg#center alt="Mount root"></p><p>Disini saya cukup percaya diri bahwa sistem akan berhasil boot, maka langsung reboot saja.</p><p><img loading=lazy src=./sistem-pulih.jpg alt=Booted></p><p><em>Alhamdulillah</em>, sistem berhasil dipulihkan!!</p><h2 id=faidah-yang-bisa-diambil>Faidah yang bisa diambil<a hidden class=anchor aria-hidden=true href=#faidah-yang-bisa-diambil>#</a></h2><p>Dari kisah ini, ada beberapa hal penting yang bisa diambil pelajaran:</p><ol><li>Backup data Anda! Seluruh aktivitas diatas terjadi karena tidak adanya backup. Dan perlu untuk ditekankan, bahwa backup seharusnya berada di tempat terpisah dengan objek backup.</li><li>File penting untuk sistem yang menggunakan <em>filesystem</em> LVM salah satunya adalah file backup metadata yang terletak di <code>/etc/lvm/backup</code>.</li><li>Jangan lakukan sesuatu yang kita tidak tahu ilmunya, dan yang tidak pada tempatnya. Melakukan sesuatu pada <em>environment</em> <em>production</em> sama seperti berjalan di tepi jurang. Jika ragu, maka serahkan pada yang ahli.</li><li>Pentingnya skill <em>googling</em> dalam pemecahan masalah. Perlu untuk mengetahui kata kunci yang tepat agar bisa mendapatkan hasil yang juga tepat sasaran. Menurut saya ini adalah skill utama untuk praktisi IT.</li></ol><hr><p>Sekian artikel kali ini. Semoga memberikan manfaat bagi pembaca, <em>barakallahufiikum</em>.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.annahri.com/tags/lvm/>lvm</a></li></ul><nav class=paginav><a class=prev href=https://blog.annahri.com/posts/belajar-bash-scripting-signal-trapping/><span class=title>« Sebelumnya</span><br><span>Belajar Bash Scripting: Signal Trapping</span>
</a><a class=next href=https://blog.annahri.com/posts/belajar-bash-scripting-argument-parsing/><span class=title>Selanjutnya »</span><br><span>Belajar Bash Scripting: Argument Parsing</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Jurnal: Menyelamatkan Partisi LVM Yang Metadatanya Tertimpa on x" href="https://x.com/intent/tweet/?text=Jurnal%3a%20Menyelamatkan%20Partisi%20LVM%20Yang%20Metadatanya%20Tertimpa&amp;url=https%3a%2f%2fblog.annahri.com%2fposts%2fjurnal-menyelamatkan-partisi-lvm-yang-rusak%2f&amp;hashtags=LVM"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Jurnal: Menyelamatkan Partisi LVM Yang Metadatanya Tertimpa on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fblog.annahri.com%2fposts%2fjurnal-menyelamatkan-partisi-lvm-yang-rusak%2f&amp;title=Jurnal%3a%20Menyelamatkan%20Partisi%20LVM%20Yang%20Metadatanya%20Tertimpa&amp;summary=Jurnal%3a%20Menyelamatkan%20Partisi%20LVM%20Yang%20Metadatanya%20Tertimpa&amp;source=https%3a%2f%2fblog.annahri.com%2fposts%2fjurnal-menyelamatkan-partisi-lvm-yang-rusak%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Jurnal: Menyelamatkan Partisi LVM Yang Metadatanya Tertimpa on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fblog.annahri.com%2fposts%2fjurnal-menyelamatkan-partisi-lvm-yang-rusak%2f&title=Jurnal%3a%20Menyelamatkan%20Partisi%20LVM%20Yang%20Metadatanya%20Tertimpa"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Jurnal: Menyelamatkan Partisi LVM Yang Metadatanya Tertimpa on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.annahri.com%2fposts%2fjurnal-menyelamatkan-partisi-lvm-yang-rusak%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Jurnal: Menyelamatkan Partisi LVM Yang Metadatanya Tertimpa on whatsapp" href="https://api.whatsapp.com/send?text=Jurnal%3a%20Menyelamatkan%20Partisi%20LVM%20Yang%20Metadatanya%20Tertimpa%20-%20https%3a%2f%2fblog.annahri.com%2fposts%2fjurnal-menyelamatkan-partisi-lvm-yang-rusak%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Jurnal: Menyelamatkan Partisi LVM Yang Metadatanya Tertimpa on telegram" href="https://telegram.me/share/url?text=Jurnal%3a%20Menyelamatkan%20Partisi%20LVM%20Yang%20Metadatanya%20Tertimpa&amp;url=https%3a%2f%2fblog.annahri.com%2fposts%2fjurnal-menyelamatkan-partisi-lvm-yang-rusak%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Jurnal: Menyelamatkan Partisi LVM Yang Metadatanya Tertimpa on ycombinator" href="https://news.ycombinator.com/submitlink?t=Jurnal%3a%20Menyelamatkan%20Partisi%20LVM%20Yang%20Metadatanya%20Tertimpa&u=https%3a%2f%2fblog.annahri.com%2fposts%2fjurnal-menyelamatkan-partisi-lvm-yang-rusak%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://blog.annahri.com/>Linux & Cloud | blog.annahri.com</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="salin";function s(){t.innerHTML="disalin!",setTimeout(()=>{t.innerHTML="salin"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>