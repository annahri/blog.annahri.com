<!doctype html><html lang=id dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Jurnal: Membenahi kendala mixed-content pada Nginx Reverse-Proxy | Linux & Cloud | Blog An-Nahri</title>
<meta name=keywords content="nginx,reverse-proxy,jurnal"><meta name=description content="
Sekedar dokumentasi dari permasalahan yang pernah saya jumpai. Terkadang dari sisi aplikasi tidak siap untuk dipublikasi secara HTTPS karena di dalam source code-nya masih ter-hardcoded beberapa resource eksternal menggunakan protokol HTTP.
Hal ini membuat kebanyakan web browser mengeluh dan enggan untuk memuat resource yang dipanggil dari protokol HTTP tadi.
Maka solusinya ada 2:

Edit source code-nya, ganti semua kode yang memanggil resource dari HTTP menjadi HTTPS.
Dari sisi Reverse-Proxy, tinggal tambahkan header berikut:



1


add_header 'Content-Security-Policy' 'upgrade-insecure-requests';


Kali ini saya akan membahas solusi untuk Reverse-Proxy Nginx"><meta name=author content="Muhammad Ahfas An Nahri"><link rel=canonical href=https://blog.annahri.com/posts/jurnal-nginx-reverse-proxy-mixed-content/><link crossorigin=anonymous href=/assets/css/stylesheet.13f755722324cf8e264349d656091daf6050df39254ee701eab199fdc10f1c5a.css integrity="sha256-E/dVciMkz44mQ0nWVgkdr2BQ3zklTucB6rGZ/cEPHFo=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.annahri.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.annahri.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.annahri.com/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.annahri.com/apple-touch-icon.png><link rel=mask-icon href=https://blog.annahri.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=id href=https://blog.annahri.com/posts/jurnal-nginx-reverse-proxy-mixed-content/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><link rel=stylesheet href=https://blog.annahri.com/css/custom_papermod.css><script async src="https://www.googletagmanager.com/gtag/js?id=G-CY69EEKCTJ"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-CY69EEKCTJ")}</script><meta property="og:url" content="https://blog.annahri.com/posts/jurnal-nginx-reverse-proxy-mixed-content/"><meta property="og:site_name" content="Linux & Cloud | Blog An-Nahri"><meta property="og:title" content="Jurnal: Membenahi kendala mixed-content pada Nginx Reverse-Proxy"><meta property="og:description" content="
Sekedar dokumentasi dari permasalahan yang pernah saya jumpai. Terkadang dari sisi aplikasi tidak siap untuk dipublikasi secara HTTPS karena di dalam source code-nya masih ter-hardcoded beberapa resource eksternal menggunakan protokol HTTP.
Hal ini membuat kebanyakan web browser mengeluh dan enggan untuk memuat resource yang dipanggil dari protokol HTTP tadi.
Maka solusinya ada 2:
Edit source code-nya, ganti semua kode yang memanggil resource dari HTTP menjadi HTTPS. Dari sisi Reverse-Proxy, tinggal tambahkan header berikut: 1 add_header 'Content-Security-Policy' 'upgrade-insecure-requests'; Kali ini saya akan membahas solusi untuk Reverse-Proxy Nginx"><meta property="og:locale" content="id-id"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-11-13T22:09:50+00:00"><meta property="article:modified_time" content="2021-11-13T22:09:50+00:00"><meta property="article:tag" content="Nginx"><meta property="article:tag" content="Reverse-Proxy"><meta property="article:tag" content="Jurnal"><meta name=twitter:card content="summary"><meta name=twitter:title content="Jurnal: Membenahi kendala mixed-content pada Nginx Reverse-Proxy"><meta name=twitter:description content="
Sekedar dokumentasi dari permasalahan yang pernah saya jumpai. Terkadang dari sisi aplikasi tidak siap untuk dipublikasi secara HTTPS karena di dalam source code-nya masih ter-hardcoded beberapa resource eksternal menggunakan protokol HTTP.
Hal ini membuat kebanyakan web browser mengeluh dan enggan untuk memuat resource yang dipanggil dari protokol HTTP tadi.
Maka solusinya ada 2:

Edit source code-nya, ganti semua kode yang memanggil resource dari HTTP menjadi HTTPS.
Dari sisi Reverse-Proxy, tinggal tambahkan header berikut:



1


add_header 'Content-Security-Policy' 'upgrade-insecure-requests';


Kali ini saya akan membahas solusi untuk Reverse-Proxy Nginx"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.annahri.com/posts/"},{"@type":"ListItem","position":2,"name":"Jurnal: Membenahi kendala mixed-content pada Nginx Reverse-Proxy","item":"https://blog.annahri.com/posts/jurnal-nginx-reverse-proxy-mixed-content/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Jurnal: Membenahi kendala mixed-content pada Nginx Reverse-Proxy","name":"Jurnal: Membenahi kendala mixed-content pada Nginx Reverse-Proxy","description":"\nSekedar dokumentasi dari permasalahan yang pernah saya jumpai. Terkadang dari sisi aplikasi tidak siap untuk dipublikasi secara HTTPS karena di dalam source code-nya masih ter-hardcoded beberapa resource eksternal menggunakan protokol HTTP.\nHal ini membuat kebanyakan web browser mengeluh dan enggan untuk memuat resource yang dipanggil dari protokol HTTP tadi.\nMaka solusinya ada 2:\nEdit source code-nya, ganti semua kode yang memanggil resource dari HTTP menjadi HTTPS. Dari sisi Reverse-Proxy, tinggal tambahkan header berikut: 1 add_header \u0026#39;Content-Security-Policy\u0026#39; \u0026#39;upgrade-insecure-requests\u0026#39;; Kali ini saya akan membahas solusi untuk Reverse-Proxy Nginx\n","keywords":["nginx","reverse-proxy","jurnal"],"articleBody":"\nSekedar dokumentasi dari permasalahan yang pernah saya jumpai. Terkadang dari sisi aplikasi tidak siap untuk dipublikasi secara HTTPS karena di dalam source code-nya masih ter-hardcoded beberapa resource eksternal menggunakan protokol HTTP.\nHal ini membuat kebanyakan web browser mengeluh dan enggan untuk memuat resource yang dipanggil dari protokol HTTP tadi.\nMaka solusinya ada 2:\nEdit source code-nya, ganti semua kode yang memanggil resource dari HTTP menjadi HTTPS. Dari sisi Reverse-Proxy, tinggal tambahkan header berikut: 1 add_header 'Content-Security-Policy' 'upgrade-insecure-requests'; Kali ini saya akan membahas solusi untuk Reverse-Proxy Nginx\nContoh konfigurasi server block dan penempatan header :\n1 2 3 4 5 6 7 8 9 10 11 12 13 server { listen 443 ssl http2; server_name namawebsite.tld; root /var/www/public_html; ... konfigurasi ssl ... add_header 'Content-Security-Policy' 'upgrade-insecure-requests'; \u003c-- Taruh disini, di dalam server block dan diluar block location location / { ... konfigurasi ... } } Semoga bermanfaat, insyaAllah.\n","wordCount":"146","inLanguage":"id","datePublished":"2021-11-13T22:09:50Z","dateModified":"2021-11-13T22:09:50Z","author":[{"@type":"Person","name":"Muhammad Ahfas An Nahri"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.annahri.com/posts/jurnal-nginx-reverse-proxy-mixed-content/"},"publisher":{"@type":"Organization","name":"Linux \u0026 Cloud | Blog An-Nahri","logo":{"@type":"ImageObject","url":"https://blog.annahri.com/favicon.ico"}}}</script></head><body class=dark id=top><header class=header><nav class=nav><div class=logo><a href=https://blog.annahri.com/ accesskey=h title="Linux & Cloud | Blog An-Nahri (Alt + H)">Linux & Cloud | Blog An-Nahri</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://blog.annahri.com/about/ title=Tentang><span>Tentang</span></a></li><li><a href=https://blog.annahri.com/arsip/ title=Arsip><span>Arsip</span></a></li><li><a href=https://blog.annahri.com/categories/ title=Kategori><span>Kategori</span></a></li><li><a href=https://blog.annahri.com/tags/ title=Tagar><span>Tagar</span></a></li><li><a href=https://blog.annahri.com/cari/ title=Pencarian><span>Pencarian</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://blog.annahri.com/>Beranda</a>&nbsp;»&nbsp;<a href=https://blog.annahri.com/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Jurnal: Membenahi kendala mixed-content pada Nginx Reverse-Proxy</h1><div class=post-meta><span class=post-date date-time='2021-11-13 22:09:50 +0000 UTC'>13 November 2021</span>&nbsp;·&nbsp;1 menit&nbsp;·&nbsp;Muhammad Ahfas An Nahri&nbsp;|&nbsp;<a href=https://github.com/annahri/blog.annahri.com/tree/main/content/posts/jurnal-nginx-reverse-proxy-mixed-content.md rel="noopener noreferrer" target=_blank>Sarankan Pengubahan</a></div></header><div class=post-content><p><img alt=Bismillah loading=lazy src=/images/bismillah-2.png#center></p><p>Sekedar dokumentasi dari permasalahan yang pernah saya jumpai. Terkadang dari sisi aplikasi tidak siap untuk dipublikasi secara HTTPS karena di dalam <em>source code</em>-nya masih ter-<em>hardcoded</em> beberapa <em>resource</em> eksternal menggunakan protokol HTTP.</p><p>Hal ini membuat kebanyakan <em>web browser</em> mengeluh dan enggan untuk memuat <em>resource</em> yang dipanggil dari protokol HTTP tadi.</p><p>Maka solusinya ada 2:</p><ol><li>Edit <em>source code</em>-nya, ganti semua kode yang memanggil resource dari HTTP menjadi HTTPS.</li><li>Dari sisi Reverse-Proxy, tinggal tambahkan header berikut:</li></ol><div class=highlight><div style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>add_header &#39;Content-Security-Policy&#39; &#39;upgrade-insecure-requests&#39;;
</span></span></code></pre></td></tr></table></div></div><p>Kali ini saya akan membahas solusi untuk Reverse-Proxy Nginx</p><p>Contoh konfigurasi server block dan penempatan header :</p><div class=highlight><div style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">13
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span>server {
</span></span><span style=display:flex><span>    listen <span style=color:#d3869b>443</span> ssl http2;
</span></span><span style=display:flex><span>    server_name namawebsite<span style=color:#fe8019>.</span>tld;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    root <span style=color:#fe8019>/</span><span style=color:#fe8019>var</span><span style=color:#fe8019>/</span>www<span style=color:#fe8019>/</span>public_html;
</span></span><span style=display:flex><span>    <span style=color:#fe8019>...</span> konfigurasi ssl <span style=color:#fe8019>...</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    add_header <span style=color:#b8bb26>&#39;Content-Security-Policy&#39;</span> <span style=color:#b8bb26>&#39;upgrade-insecure-requests&#39;</span>;  <span style=color:#fe8019>&lt;--</span> Taruh disini, di dalam server block dan diluar block location
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    location <span style=color:#fe8019>/</span> {
</span></span><span style=display:flex><span>        <span style=color:#fe8019>...</span> konfigurasi <span style=color:#fe8019>...</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>Semoga bermanfaat, <em>insyaAllah</em>.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.annahri.com/tags/nginx/>Nginx</a></li><li><a href=https://blog.annahri.com/tags/reverse-proxy/>Reverse-Proxy</a></li><li><a href=https://blog.annahri.com/tags/jurnal/>Jurnal</a></li></ul><nav class=paginav><a class=prev href=https://blog.annahri.com/posts/belajar-bash-scripting-conditional/><span class=title>« Sebelumnya</span><br><span>Belajar Bash Scripting: Conditional</span>
</a><a class=next href=https://blog.annahri.com/posts/trik-bash-shell-1/><span class=title>Selanjutnya »</span><br><span>Trik Bash Shell #1</span></a></nav></footer><script src=https://giscus.app/client.js data-repo=annahri/blog.annahri.com data-repo-id=R_kgDOGUC4_g data-category=General data-category-id=DIC_kwDOGUC4_s4CdOMx data-mapping=og:title data-reactions-enabled=0 data-emit-metadata=0 data-input-position=top data-theme=dark_dimmed data-lang=id data-loading=lazy crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2024 <a href=https://blog.annahri.com/>Linux & Cloud | Blog An-Nahri</a></span> ·
Semua hak cipta dilindungi. Konten di blog ini tidak dapat digunakan, disalin, atau didistribusikan tanpa izin tertulis dari pemilik hak cipta ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="salin";function s(){t.innerHTML="disalin!",setTimeout(()=>{t.innerHTML="salin"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>