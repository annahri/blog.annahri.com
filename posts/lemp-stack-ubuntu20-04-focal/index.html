<!doctype html><html lang=id dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>Instalasi LEMP Stack (Linux, Nginx, MariaDB, PHP) pada Ubuntu 20.04 | An-Nahri | Linux Blogger</title>
<meta name=keywords content="webserver,ubuntu-focal,nginx,php-fpm,stack">
<meta name=description content="LEMP stack adalah software stack yang terdiri dari (L)inux, (E)gin-x alias Nginx, (M)ysql atau Mariadb, dan (P)HP.
Di sini, saya akan menjelaskan bagaimana cara instalasi LEMP stack pada Ubuntu 20.04. Untuk OS berbasis RPM menyusul.
Konfigurasi Awal Pastikan repositori Anda sudah pada kondisi terbaru dan package pada sistem anda terupgrade.
$ sudo apt update && sudo apt upgrade -y Jika menggunakan firewall, pastikan port 80 (HTTP) dan 443 (HTTPS) terbuka. Kalau anda menggunakan ufw maka perintahnya adalah:">
<meta name=author content="Saya">
<link rel=canonical href=https://blog.annahri.com/posts/lemp-stack-ubuntu20-04-focal/>
<link crossorigin=anonymous href=/assets/css/stylesheet.min.6f60056d44d3f7eb69a4bc6c332b59960f3a995802bded244750232f33713c49.css integrity="sha256-b2AFbUTT9+tppLxsMytZlg86mVgCve0kR1AjLzNxPEk=" rel="preload stylesheet" as=style>
<script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://s3-jak01.storageraya.com/ahf-testcdn/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=https://blog.annahri.com/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=https://blog.annahri.com/favicon-32x32.png>
<link rel=apple-touch-icon href=https://blog.annahri.com/apple-touch-icon.png>
<link rel=mask-icon href=https://blog.annahri.com/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.89.4">
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript>
<meta property="og:title" content="Instalasi LEMP Stack (Linux, Nginx, MariaDB, PHP) pada Ubuntu 20.04">
<meta property="og:description" content="LEMP stack adalah software stack yang terdiri dari (L)inux, (E)gin-x alias Nginx, (M)ysql atau Mariadb, dan (P)HP.
Di sini, saya akan menjelaskan bagaimana cara instalasi LEMP stack pada Ubuntu 20.04. Untuk OS berbasis RPM menyusul.
Konfigurasi Awal Pastikan repositori Anda sudah pada kondisi terbaru dan package pada sistem anda terupgrade.
$ sudo apt update && sudo apt upgrade -y Jika menggunakan firewall, pastikan port 80 (HTTP) dan 443 (HTTPS) terbuka. Kalau anda menggunakan ufw maka perintahnya adalah:">
<meta property="og:type" content="article">
<meta property="og:url" content="https://blog.annahri.com/posts/lemp-stack-ubuntu20-04-focal/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2021-05-27T00:00:00+07:00">
<meta property="article:modified_time" content="2021-05-27T00:00:00+07:00"><meta property="og:site_name" content="An-Nahri | Linux Blogger">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Instalasi LEMP Stack (Linux, Nginx, MariaDB, PHP) pada Ubuntu 20.04">
<meta name=twitter:description content="LEMP stack adalah software stack yang terdiri dari (L)inux, (E)gin-x alias Nginx, (M)ysql atau Mariadb, dan (P)HP.
Di sini, saya akan menjelaskan bagaimana cara instalasi LEMP stack pada Ubuntu 20.04. Untuk OS berbasis RPM menyusul.
Konfigurasi Awal Pastikan repositori Anda sudah pada kondisi terbaru dan package pada sistem anda terupgrade.
$ sudo apt update && sudo apt upgrade -y Jika menggunakan firewall, pastikan port 80 (HTTP) dan 443 (HTTPS) terbuka. Kalau anda menggunakan ufw maka perintahnya adalah:">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.annahri.com/posts/"},{"@type":"ListItem","position":2,"name":"Instalasi LEMP Stack (Linux, Nginx, MariaDB, PHP) pada Ubuntu 20.04","item":"https://blog.annahri.com/posts/lemp-stack-ubuntu20-04-focal/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Instalasi LEMP Stack (Linux, Nginx, MariaDB, PHP) pada Ubuntu 20.04","name":"Instalasi LEMP Stack (Linux, Nginx, MariaDB, PHP) pada Ubuntu 20.04","description":"LEMP stack adalah software stack yang terdiri dari (L)inux, (E)gin-x alias Nginx, (M)ysql atau Mariadb, dan (P)HP.\nDi sini, saya akan menjelaskan bagaimana cara instalasi LEMP stack pada Ubuntu 20.04. Untuk OS berbasis RPM menyusul.\nKonfigurasi Awal Pastikan repositori Anda sudah pada kondisi terbaru dan package pada sistem anda terupgrade.\n$ sudo apt update \u0026amp;\u0026amp; sudo apt upgrade -y Jika menggunakan firewall, pastikan port 80 (HTTP) dan 443 (HTTPS) terbuka. Kalau anda menggunakan ufw maka perintahnya adalah:","keywords":["webserver","ubuntu-focal","nginx","php-fpm","stack"],"articleBody":"LEMP stack adalah software stack yang terdiri dari (L)inux, (E)gin-x alias Nginx, (M)ysql atau Mariadb, dan (P)HP.\nDi sini, saya akan menjelaskan bagaimana cara instalasi LEMP stack pada Ubuntu 20.04. Untuk OS berbasis RPM menyusul.\nKonfigurasi Awal Pastikan repositori Anda sudah pada kondisi terbaru dan package pada sistem anda terupgrade.\n$ sudo apt update \u0026\u0026 sudo apt upgrade -y Jika menggunakan firewall, pastikan port 80 (HTTP) dan 443 (HTTPS) terbuka. Kalau anda menggunakan ufw maka perintahnya adalah:\n$ sudo ufw allow proto tcp from any to any port 80,443 Gunakan perintah dibawah ini kalau Anda menggunakan iptables:\n$ sudo iptables -A INPUT -p tcp -m multiport --dports 80,443 -j ACCEPT # agar rule diatas menjadi 'permanen' $ iptables-save | sudo tee /etc/iptables/rules.v4 Instalasi Stack Selanjutnya instal nginx, mariadb, dan php-fpm :\n$ sudo apt install -y \\  nginx \\  mariadb-server mariadb-common \\  php7.4-fpm php7.4 php7.4-common php7.4-mysql Pastikan semua service berjalan dengan baik :\n$ sudo systemctl status nginx $ sudo systemctl status mariadb $ sudo systemctl status php7.4-fpm Jika belum berjalan, maka jalankan service-service tersebut dengan perintah:\n$ sudo systemctl enable nginx --now $ sudo systemctl enable mariadb --now $ sudo systemctl enable php7.4-fpm --now Kemudian cek juga apakah port 80 sudah listen atau belum.\n$ sudo ss -tulpn | grep ':80' Untuk port 443 masih belum. Karena setelah instalasi baru, secara asal port 80 yang listen.\nTes Web Server Untuk itu, silahkan coba buka browser menggunakan alamat IP server. Atau juga bisa menggunakan domain. Jika memang sudah diatur A recordnya.\nAtau, pengecekan bisa dilakukan dengan menggunakan curl :\n$ curl localhost   Welcome to nginx!  body { width: 35em; margin: 0 auto; font-family: Tahoma, Verdana, Arial, sans-serif; }    Welcome to nginx! If you see this page, the nginx web server is successfully installed and working. Further configuration is required.\nFor online documentation and support please refer to href=\"http://nginx.org/\"nginx.org. Commercial support is available at href=\"http://nginx.com/\"nginx.com.\nThank you for using nginx.\n  Tes Halaman PHP Buat file php dengan isi berikut, simpan di /var/www/html/phpinfo.php:\nphp phpinfo(); ?Kemudian pada browser / curl, silahkan coba akses http://IP SERVER/phpinfo.php:\n$ curl localhost/phpinfo.php (); ? Kok tidak berhasil? Ya, karena nginx belum diatur untuk memproses halaman php.\nEdit file /etc/nginx/sites-available/default.conf kemudian cari baris berikut, dan hilangkan pagar-pagar didepannya (alias uncomment) :\nlocation ~ \\.php$ { include snippets/fastcgi-php.conf; # # With php-fpm (or other unix sockets): fastcgi_pass unix:/var/run/php/php7.4-fpm.sock; # # With php-cgi (or other tcp sockets): # fastcgi_pass 127.0.0.1:9000; } Sederhananya, blok diatas menginstrusikan nginx untuk memproses seluruh file yang berakhiran .php kepada php-fpm. Bisa melalui socket unix (unix:/path/to/socket.sock) atau socket tcp (IP:port).\nSetelah itu, reload konfigurasi nginx sudo nginx -s reload dan tes kembali menggunakan curl atau browser.\n$ curl localhost/phpinfo.php Jika menghasilkan halaman info php, maka konfigurasi sudah benar.\nKonfigurasi dan Tes Konektivitas Database Biasakan untuk selalu menjalankan mysql_secure_installation setiap kali menginstall mariadb-server atau mysql-server. Karena sesuai dengan namanya, perintah tersebut memastikan instalasi mysql itu aman alias secure.\n$ sudo mysql_secure_installation NOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MariaDB SERVERS IN PRODUCTION USE! PLEASE READ EACH STEP CAREFULLY! In order to log into MariaDB to secure it, we'll need the current password for the root user. If you've just installed MariaDB, and you haven't set the root password yet, the password will be blank, so you should just press enter here. Enter current password for root (enter for none): OK, successfully used password, moving on... Setting the root password ensures that nobody can log into the MariaDB root user without the proper authorisation. Set root password? [Y/n] Y New password: Re-enter new password: Password updated successfully! Reloading privilege tables.. ... Success! By default, a MariaDB installation has an anonymous user, allowing anyone to log into MariaDB without having to have a user account created for them. This is intended only for testing, and to make the installation go a bit smoother. You should remove them before moving into a production environment. Remove anonymous users? [Y/n] Y Y ... Success! Normally, root should only be allowed to connect from 'localhost'. This ensures that someone cannot guess at the root password from the network. Disallow root login remotely? [Y/n] Y ... Success! By default, MariaDB comes with a database named 'test' that anyone can access. This is also intended only for testing, and should be removed before moving into a production environment. Remove test database and access to it? [Y/n] Y - Dropping test database... ... Success! - Removing privileges on test database... ... Success! Reloading the privilege tables will ensure that all changes made so far will take effect immediately. Reload privilege tables now? [Y/n] Y ... Success! Cleaning up... All done! If you've completed all of the above steps, your MariaDB installation should now be secure. Thanks for using MariaDB! Jawab setiap promptnya dengan Y.\nKemudian kita buat satu database percobaan dan satu database user.\n$ sudo mysql CREATEDATABASEtesdb;CREATEUSERdbuser@localhostIDENTIFIEDBY'password';GRANTALLPRIVILEGESONtesdb.*TOdbuser@localhost;FLUSHPRIVILEGES;Buat satu file untuk uji coba konek php ke database. Simpan di /var/www/html/tesdb.php\nphp $con = mysqli_connect(\"localhost\",\"dbuser\",\"password\",\"tesdb\"); if (mysqli_connect_errno()) { echo \"Failed to connect to MySQL: \" . mysqli_connect_error(); exit(); } else { echo \"Koneksi Database Berhasil.\"; } ?Tes kembali menggunakan browser atau curl, buka http://IP SERVER/testdb.php\n$ curl localhost/testdb.php Koneksi Database Berhasil. Selesai!\n Kesimpulan Begitu mudahnya untuk melakukan instalasi LEMP stack pada Ubuntu 20.04. Cukup menginstal nginx + mysql/mariadb + php-fpm, dan sedikit konfigurasi pada nginx.\nTentunya akan memerlukan konfigurasi lebih lanjut jika hendak menginstal webapp semacam wordpress, dan semisalnya.\nSemoga bermanfaat, insyaAllah.\n","wordCount":"913","inLanguage":"id","datePublished":"2021-05-27T00:00:00+07:00","dateModified":"2021-05-27T00:00:00+07:00","author":{"@type":"Person","name":"Saya"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.annahri.com/posts/lemp-stack-ubuntu20-04-focal/"},"publisher":{"@type":"Organization","name":"An-Nahri | Linux Blogger","logo":{"@type":"ImageObject","url":"https://s3-jak01.storageraya.com/ahf-testcdn/favicon.ico"}}}</script>
</head>
<body id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://blog.annahri.com/ accesskey=h title="An-Nahri | Linux Blogger (Alt + H)">An-Nahri | Linux Blogger</a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</div>
<ul id=menu>
<li>
<a href=https://blog.annahri.com/arsip/ title=Arsip>
<span>Arsip</span>
</a>
</li>
<li>
<a href=https://blog.annahri.com/categories/ title=Kategori>
<span>Kategori</span>
</a>
</li>
<li>
<a href=https://blog.annahri.com/tags/ title=Tag-tag>
<span>Tag-tag</span>
</a>
</li>
<li>
<a href=https://blog.annahri.com/cari/ title=Pencarian>
<span>Pencarian</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<div class=breadcrumbs><a href=https://blog.annahri.com/>Beranda</a>&nbsp;»&nbsp;<a href=https://blog.annahri.com/posts/>Posts</a></div>
<h1 class=post-title>
Instalasi LEMP Stack (Linux, Nginx, MariaDB, PHP) pada Ubuntu 20.04
</h1>
<div class=post-meta><span class=post-date date-time="2021-05-27 00:00:00 +0700 WIB">27 Mei 2021</span>&nbsp;·&nbsp;5 menit&nbsp;·&nbsp;Saya&nbsp;|&nbsp;<a href=https://github.com/annahri/blog.annahri.com/tree/main/content/posts/ubuntu-lemp-stack.md rel="noopener noreferrer" target=_blank>Sarankan Perubahan</a>
</div>
</header> <div class=toc>
<details>
<summary accesskey=c title="(Alt + C)">
<span class=details>Daftar Isi</span>
</summary>
<div class=inner><ul>
<li>
<a href=#konfigurasi-awal aria-label="Konfigurasi Awal">Konfigurasi Awal</a></li>
<li>
<a href=#instalasi-stack aria-label="Instalasi Stack">Instalasi Stack</a></li>
<li>
<a href=#tes-web-server aria-label="Tes Web Server">Tes Web Server</a></li>
<li>
<a href=#tes-halaman-php aria-label="Tes Halaman PHP">Tes Halaman PHP</a></li>
<li>
<a href=#konfigurasi-dan-tes-konektivitas-database aria-label="Konfigurasi dan Tes Konektivitas Database">Konfigurasi dan Tes Konektivitas Database</a></li>
<li>
<a href=#kesimpulan aria-label=Kesimpulan>Kesimpulan</a>
</li>
</ul>
</div>
</details>
</div>
<div class=post-content><p><img loading=lazy src=https://s3-jak01.storageraya.com/ahf-testcdn/img/bismillah_300x60.png#center alt=Bismillah>
</p>
<p>LEMP stack adalah software stack yang terdiri dari (L)inux, (E)gin-x alias Nginx,
(M)ysql atau Mariadb, dan (P)HP.</p>
<p>Di sini, saya akan menjelaskan bagaimana cara instalasi LEMP stack pada Ubuntu 20.04.
Untuk OS berbasis RPM menyusul.</p>
<h3 id=konfigurasi-awal>Konfigurasi Awal<a hidden class=anchor aria-hidden=true href=#konfigurasi-awal>#</a></h3>
<p>Pastikan repositori Anda sudah pada kondisi terbaru dan package pada sistem anda terupgrade.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh>$ sudo apt update <span class=o>&amp;&amp;</span> sudo apt upgrade -y
</code></pre></div><p>Jika menggunakan firewall, pastikan port 80 (HTTP) dan 443 (HTTPS) terbuka.
Kalau anda menggunakan <code>ufw</code> maka perintahnya adalah:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh>$ sudo ufw allow proto tcp from any to any port 80,443
</code></pre></div><p>Gunakan perintah dibawah ini kalau Anda menggunakan <code>iptables</code>:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh>$ sudo iptables -A INPUT -p tcp -m multiport --dports 80,443 -j ACCEPT
<span class=c1># agar rule diatas menjadi &#39;permanen&#39;</span>
$ iptables-save <span class=p>|</span> sudo tee /etc/iptables/rules.v4
</code></pre></div><h3 id=instalasi-stack>Instalasi Stack<a hidden class=anchor aria-hidden=true href=#instalasi-stack>#</a></h3>
<p>Selanjutnya instal nginx, mariadb, dan php-fpm :</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh>$ sudo apt install -y <span class=se>\
</span><span class=se></span>    nginx <span class=se>\
</span><span class=se></span>    mariadb-server mariadb-common <span class=se>\
</span><span class=se></span>    php7.4-fpm php7.4 php7.4-common php7.4-mysql
</code></pre></div><p>Pastikan semua service berjalan dengan baik :</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh>$ sudo systemctl status nginx
$ sudo systemctl status mariadb
$ sudo systemctl status php7.4-fpm
</code></pre></div><p>Jika belum berjalan, maka jalankan service-service tersebut dengan perintah:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh>$ sudo systemctl <span class=nb>enable</span> nginx --now
$ sudo systemctl <span class=nb>enable</span> mariadb --now
$ sudo systemctl <span class=nb>enable</span> php7.4-fpm --now
</code></pre></div><p>Kemudian cek juga apakah port 80 sudah listen atau belum.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh>$ sudo ss -tulpn <span class=p>|</span> grep <span class=s1>&#39;:80&#39;</span>
</code></pre></div><p>Untuk port 443 masih belum. Karena setelah instalasi baru, secara asal port 80 yang listen.</p>
<h3 id=tes-web-server>Tes Web Server<a hidden class=anchor aria-hidden=true href=#tes-web-server>#</a></h3>
<p>Untuk itu, silahkan coba buka browser menggunakan alamat IP server. Atau juga bisa menggunakan domain.
Jika memang sudah diatur A recordnya.</p>
<p>Atau, pengecekan bisa dilakukan dengan menggunakan <code>curl</code> :</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh>$ curl localhost
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Welcome to nginx!&lt;/title&gt;
&lt;style&gt;
    body <span class=o>{</span>
        width: 35em<span class=p>;</span>
        margin: <span class=m>0</span> auto<span class=p>;</span>
        font-family: Tahoma, Verdana, Arial, sans-serif<span class=p>;</span>
    <span class=o>}</span>
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;
&lt;p&gt;If you see this page, the nginx web server is successfully installed and
working. Further configuration is required.&lt;/p&gt;

&lt;p&gt;For online documentation and support please refer to
&lt;a <span class=nv>href</span><span class=o>=</span><span class=s2>&#34;http://nginx.org/&#34;</span>&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;
Commercial support is available at
&lt;a <span class=nv>href</span><span class=o>=</span><span class=s2>&#34;http://nginx.com/&#34;</span>&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Thank you <span class=k>for</span> using nginx.&lt;/em&gt;&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre></div><h3 id=tes-halaman-php>Tes Halaman PHP<a hidden class=anchor aria-hidden=true href=#tes-halaman-php>#</a></h3>
<p>Buat file php dengan isi berikut, simpan di <code>/var/www/html/phpinfo.php</code>:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=o>&lt;?</span><span class=nx>php</span>
    <span class=nx>phpinfo</span><span class=p>();</span>
<span class=cp>?&gt;</span><span class=err>
</span></code></pre></div><p>Kemudian pada browser / <code>curl</code>, silahkan coba akses <code>http://IP SERVER/phpinfo.php</code>:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh>$ curl localhost/phpinfo.php
&lt;?php
   phpinfo<span class=o>()</span><span class=p>;</span>
?&gt;
</code></pre></div><p>Kok tidak berhasil? Ya, karena <code>nginx</code> belum diatur untuk memproses halaman <code>php</code>.</p>
<p>Edit file <code>/etc/nginx/sites-available/default.conf</code> kemudian cari baris berikut, dan hilangkan pagar-pagar didepannya (alias uncomment) :</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback>        location ~ \.php$ {
               include snippets/fastcgi-php.conf;
        #       # With php-fpm (or other unix sockets):
               fastcgi_pass unix:/var/run/php/php7.4-fpm.sock;
        #       # With php-cgi (or other tcp sockets):
        #       fastcgi_pass 127.0.0.1:9000;
        }
</code></pre></div><p>Sederhananya, blok diatas menginstrusikan <code>nginx</code> untuk memproses seluruh file yang berakhiran <code>.php</code> kepada <code>php-fpm</code>.
Bisa melalui socket unix (<code>unix:/path/to/socket.sock</code>) atau socket tcp (<code>IP:port</code>).</p>
<p>Setelah itu, reload konfigurasi nginx <code>sudo nginx -s reload</code> dan tes kembali menggunakan <code>curl</code> atau browser.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh>$ curl localhost/phpinfo.php
</code></pre></div><p>Jika menghasilkan halaman info php, maka konfigurasi sudah benar.</p>
<h3 id=konfigurasi-dan-tes-konektivitas-database>Konfigurasi dan Tes Konektivitas Database<a hidden class=anchor aria-hidden=true href=#konfigurasi-dan-tes-konektivitas-database>#</a></h3>
<p>Biasakan untuk selalu menjalankan <code>mysql_secure_installation</code> setiap kali menginstall <code>mariadb-server</code> atau <code>mysql-server</code>.
Karena sesuai dengan namanya, perintah tersebut memastikan instalasi mysql itu aman alias secure.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh>$ sudo mysql_secure_installation

NOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MariaDB
      SERVERS IN PRODUCTION USE!  PLEASE READ EACH STEP CAREFULLY!

In order to log into MariaDB to secure it, we<span class=s1>&#39;ll need the current
</span><span class=s1>password for the root user.  If you&#39;</span>ve just installed MariaDB, and
you haven<span class=s1>&#39;t set the root password yet, the password will be blank,
</span><span class=s1>so you should just press enter here.
</span><span class=s1>
</span><span class=s1>Enter current password for root (enter for none): 
</span><span class=s1>OK, successfully used password, moving on...
</span><span class=s1>
</span><span class=s1>Setting the root password ensures that nobody can log into the MariaDB
</span><span class=s1>root user without the proper authorisation.
</span><span class=s1>
</span><span class=s1>Set root password? [Y/n] Y
</span><span class=s1>New password: 
</span><span class=s1>Re-enter new password: 
</span><span class=s1>Password updated successfully!
</span><span class=s1>Reloading privilege tables..
</span><span class=s1> ... Success!
</span><span class=s1>
</span><span class=s1>
</span><span class=s1>By default, a MariaDB installation has an anonymous user, allowing anyone
</span><span class=s1>to log into MariaDB without having to have a user account created for
</span><span class=s1>them.  This is intended only for testing, and to make the installation
</span><span class=s1>go a bit smoother.  You should remove them before moving into a
</span><span class=s1>production environment.
</span><span class=s1>
</span><span class=s1>Remove anonymous users? [Y/n] Y
</span><span class=s1>Y   
</span><span class=s1> ... Success!
</span><span class=s1>
</span><span class=s1>Normally, root should only be allowed to connect from &#39;</span>localhost<span class=s1>&#39;.  This
</span><span class=s1>ensures that someone cannot guess at the root password from the network.
</span><span class=s1>
</span><span class=s1>Disallow root login remotely? [Y/n] Y
</span><span class=s1> ... Success!
</span><span class=s1>
</span><span class=s1>By default, MariaDB comes with a database named &#39;</span>test<span class=s1>&#39; that anyone can
</span><span class=s1>access.  This is also intended only for testing, and should be removed
</span><span class=s1>before moving into a production environment.
</span><span class=s1>
</span><span class=s1>Remove test database and access to it? [Y/n] Y
</span><span class=s1> - Dropping test database...
</span><span class=s1> ... Success!
</span><span class=s1> - Removing privileges on test database...
</span><span class=s1> ... Success!
</span><span class=s1>
</span><span class=s1>Reloading the privilege tables will ensure that all changes made so far
</span><span class=s1>will take effect immediately.
</span><span class=s1>
</span><span class=s1>Reload privilege tables now? [Y/n] Y
</span><span class=s1> ... Success!
</span><span class=s1>
</span><span class=s1>Cleaning up...
</span><span class=s1>
</span><span class=s1>All done!  If you&#39;</span>ve completed all of the above steps, your MariaDB
installation should now be secure.

Thanks <span class=k>for</span> using MariaDB!
</code></pre></div><p>Jawab setiap promptnya dengan <code>Y</code>.</p>
<p>Kemudian kita buat satu database percobaan dan satu database user.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh>$ sudo mysql
</code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-mysql data-lang=mysql><span class=k>CREATE</span><span class=w> </span><span class=k>DATABASE</span><span class=w> </span><span class=n>tesdb</span><span class=p>;</span><span class=w>
</span><span class=w></span><span class=k>CREATE</span><span class=w> </span><span class=k>USER</span><span class=w> </span><span class=n>dbuser</span><span class=o>@</span><span class=n>localhost</span><span class=w> </span><span class=k>IDENTIFIED</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=s1>&#39;password&#39;</span><span class=p>;</span><span class=w>
</span><span class=w></span><span class=k>GRANT</span><span class=w> </span><span class=k>ALL</span><span class=w> </span><span class=k>PRIVILEGES</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>tesdb</span><span class=p>.</span><span class=o>*</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=n>dbuser</span><span class=o>@</span><span class=n>localhost</span><span class=p>;</span><span class=w>
</span><span class=w></span><span class=k>FLUSH</span><span class=w> </span><span class=k>PRIVILEGES</span><span class=p>;</span><span class=w>
</span></code></pre></div><p>Buat satu file untuk uji coba konek php ke database. Simpan di <code>/var/www/html/tesdb.php</code></p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=o>&lt;?</span><span class=nx>php</span>
    <span class=nv>$con</span> <span class=o>=</span> <span class=nx>mysqli_connect</span><span class=p>(</span><span class=s2>&#34;localhost&#34;</span><span class=p>,</span><span class=s2>&#34;dbuser&#34;</span><span class=p>,</span><span class=s2>&#34;password&#34;</span><span class=p>,</span><span class=s2>&#34;tesdb&#34;</span><span class=p>);</span>

    <span class=k>if</span> <span class=p>(</span><span class=nx>mysqli_connect_errno</span><span class=p>())</span> <span class=p>{</span>
        <span class=k>echo</span> <span class=s2>&#34;Failed to connect to MySQL: &#34;</span> <span class=o>.</span> <span class=nx>mysqli_connect_error</span><span class=p>();</span>
        <span class=k>exit</span><span class=p>();</span>
    <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
        <span class=k>echo</span> <span class=s2>&#34;Koneksi Database Berhasil.&#34;</span><span class=p>;</span>
    <span class=p>}</span>
<span class=cp>?&gt;</span><span class=err>
</span></code></pre></div><p>Tes kembali menggunakan browser atau <code>curl</code>, buka <code>http://IP SERVER/testdb.php</code></p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh>$ curl localhost/testdb.php
Koneksi Database Berhasil.
</code></pre></div><p>Selesai!</p>
<hr>
<h3 id=kesimpulan>Kesimpulan<a hidden class=anchor aria-hidden=true href=#kesimpulan>#</a></h3>
<p>Begitu mudahnya untuk melakukan instalasi LEMP stack pada Ubuntu 20.04.
Cukup menginstal <code>nginx</code> + <code>mysql</code>/<code>mariadb</code> + <code>php-fpm</code>, dan sedikit konfigurasi pada nginx.</p>
<p>Tentunya akan memerlukan konfigurasi lebih lanjut jika hendak menginstal webapp semacam wordpress, dan semisalnya.</p>
<p>Semoga bermanfaat, insyaAllah.</p>
</div>
<footer class=post-footer>
<ul class=post-tags>
<li><a href=https://blog.annahri.com/tags/webserver/>webserver</a></li>
<li><a href=https://blog.annahri.com/tags/ubuntu-focal/>ubuntu-focal</a></li>
<li><a href=https://blog.annahri.com/tags/nginx/>nginx</a></li>
<li><a href=https://blog.annahri.com/tags/php-fpm/>php-fpm</a></li>
<li><a href=https://blog.annahri.com/tags/stack/>stack</a></li>
</ul>
<nav class=paginav>
<a class=prev href=https://blog.annahri.com/posts/cara-extend-vm-disk-lvm/>
<span class=title>« Halaman Sebelumnya</span>
<br>
<span>Cara Extend VM Disk untuk LVM</span>
</a>
</nav>
<div class=share-buttons>
<a target=_blank rel="noopener noreferrer" aria-label="share Instalasi LEMP Stack (Linux, Nginx, MariaDB, PHP) pada Ubuntu 20.04 on twitter" href="https://twitter.com/intent/tweet/?text=Instalasi%20LEMP%20Stack%20%28Linux%2c%20Nginx%2c%20MariaDB%2c%20PHP%29%20pada%20Ubuntu%2020.04&url=https%3a%2f%2fblog.annahri.com%2fposts%2flemp-stack-ubuntu20-04-focal%2f&hashtags=webserver%2cubuntu-focal%2cnginx%2cphp-fpm%2cstack"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share Instalasi LEMP Stack (Linux, Nginx, MariaDB, PHP) pada Ubuntu 20.04 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fblog.annahri.com%2fposts%2flemp-stack-ubuntu20-04-focal%2f&title=Instalasi%20LEMP%20Stack%20%28Linux%2c%20Nginx%2c%20MariaDB%2c%20PHP%29%20pada%20Ubuntu%2020.04&summary=Instalasi%20LEMP%20Stack%20%28Linux%2c%20Nginx%2c%20MariaDB%2c%20PHP%29%20pada%20Ubuntu%2020.04&source=https%3a%2f%2fblog.annahri.com%2fposts%2flemp-stack-ubuntu20-04-focal%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share Instalasi LEMP Stack (Linux, Nginx, MariaDB, PHP) pada Ubuntu 20.04 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fblog.annahri.com%2fposts%2flemp-stack-ubuntu20-04-focal%2f&title=Instalasi%20LEMP%20Stack%20%28Linux%2c%20Nginx%2c%20MariaDB%2c%20PHP%29%20pada%20Ubuntu%2020.04"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share Instalasi LEMP Stack (Linux, Nginx, MariaDB, PHP) pada Ubuntu 20.04 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.annahri.com%2fposts%2flemp-stack-ubuntu20-04-focal%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share Instalasi LEMP Stack (Linux, Nginx, MariaDB, PHP) pada Ubuntu 20.04 on whatsapp" href="https://api.whatsapp.com/send?text=Instalasi%20LEMP%20Stack%20%28Linux%2c%20Nginx%2c%20MariaDB%2c%20PHP%29%20pada%20Ubuntu%2020.04%20-%20https%3a%2f%2fblog.annahri.com%2fposts%2flemp-stack-ubuntu20-04-focal%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share Instalasi LEMP Stack (Linux, Nginx, MariaDB, PHP) pada Ubuntu 20.04 on telegram" href="https://telegram.me/share/url?text=Instalasi%20LEMP%20Stack%20%28Linux%2c%20Nginx%2c%20MariaDB%2c%20PHP%29%20pada%20Ubuntu%2020.04&url=https%3a%2f%2fblog.annahri.com%2fposts%2flemp-stack-ubuntu20-04-focal%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg>
</a>
</div>
</footer>
</article>
</main>
<footer class=footer>
<span>&copy; 2021 <a href=https://blog.annahri.com/>An-Nahri | Linux Blogger</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
</body>
</html>